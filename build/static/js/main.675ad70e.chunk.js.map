{"version":3,"sources":["Pages/DocPage lazy /^/.*$/ groupOptions: {} namespace object","services/AuthStateService.ts","dragon/dragon.model/dragon.model.ts","services/SchemaService.ts","Pages/Editor/ActionMenu/ActionMenu.tsx","images/action.png","images/comment.png","images/input.png","images/output.png","images/question.png","images/loop.png","images/variant.png","images/pause.png","context/user.provider.tsx","Pages/Editor/ProjectTree/ProjectTree.tsx","Pages/Editor/Shapes/CONSTRAINTS.ts","Pages/Editor/Shapes/Functions.ts","Pages/Editor/Shapes/Begin.tsx","Pages/Editor/Shapes/Action.tsx","Pages/Editor/Shapes/Inserter.tsx","Pages/Editor/Shapes/Schema.tsx","Pages/Editor/KonvaCanvas/KonvaCanvas.tsx","Pages/Editor/Components/SchemaControl.tsx","Pages/Editor/Components/ProjectTreeCurator.tsx","services/UserService.ts","services/CuratorService.ts","Pages/Editor/Components/StudentsSelector.tsx","Pages/Editor/Editor.tsx","Pages/Login/Login.tsx","Pages/NotFound/NotFound.tsx","components/LogoutButton.tsx","components/NavigationFooter.tsx","components/ConfirmDialog.tsx","components/NotifyDialog.tsx","Pages/Management/Components/ChangePassword.tsx","Pages/Management/Components/RenameForm.tsx","Pages/Management/AccountControl.tsx","Pages/Management/UserCard.tsx","Pages/Management/UserList.tsx","Pages/Management/UserManagement.tsx","Pages/Management/Management.tsx","Pages/About/About.tsx","App.tsx","index.tsx","Pages/DocPage/DocPage.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","keys","Object","module","exports","AuthStateService","uuid","role","username","access_token","email","_uuid","_role","_username","_accessToken","_email","_instance","name","token","URL","process","BASE_API_PREFIX","axios","get","catch","password","post","response","data","status","statusText","body","responseData","message","delete","headers","getToken","oldPassword","newPassword","this","getUsername","patch","InstructionType","DragonInstruction","type","parent","text","children","uuidv4","meta","instruction","uuid_next","pos","findIndex","element","splice","push","forEach","Find","DragonActionInstruction","DragonSleepInstruction","DragonInputInstruction","DragonOutputInstruction","DragonCommentInstruction","DragonBranchInstruction","DragonConditionInstruction","restore","Add","DragonLimiterInstruction","DragonLoopInstruction","DragonSwitchInstruction","branch","DragonSchemaInstruction","DragonPrimitiveIstruction","DragonModel","head","containers","Map","dragonInstruction","set","Insert","next","ifInstruction","elseInstruction","limiter","value","jsonOjb","create","key","arr","iconD","Remove","child","RecursiveDelete","validate","icon","getInstruction","deepest","deeper","length","container","err","console","log","instruction_meta","val","instruction_id","schema","castInstruction","parseInstructionFromJSON","clear","deep","offset","repeat","parseInstruction","stringOfChildren","generatedCode","replace","startsWith","arrayOfChildren","restored","restoreFromJSON","SchemaService","authService","_authService","getInstance","model","_schema","user_id","setTokenBearer","idUser","last_changed_by_id","toJSON","getUUID","put","ActionMenuOptions","ActionMenu","props","Card","Header","Body","Row","Button","className","Image","rounded","src","fluid","onClick","setActionMenuOption","variant","initialTokenState","undefined","userReducer","state","action","localStorage","setItem","JSON","stringify","payload","UserContext","createContext","UserProvider","React","useReducer","dispatch","Provider","ProjectTree","schemaService","setSchema","useContext","useState","schemas","setSchemas","CreateSchema","a","createNewSchema","generatedSchema","useEffect","getUserSchemas","_err","ListGroup","scheme","Item","as","WIDTH","HEIGHT","Updatetext","textRef","textPosition","getAbsolutePosition","areaPosition","x","y","textarea","document","createElement","appendChild","style","position","top","left","width","toString","focus","addEventListener","keyCode","removeChild","Begin","textWidth","setTextWidth","textHeight","setTextHeight","rectRef","useRef","groupRef","current","clip","height","setText","ref","cornerRadius","stroke","strokeWidth","fill","offsetX","align","onDblClick","verticalAlign","Action","setModel","actionMenuOption","_clearCaches","ShapeType","ACTION","COMMENT","OUTPUT","sceneFunc","context","shape","beginPath","moveTo","lineTo","closePath","fillStrokeShape","SLEEP","CONDITION","m","DeleteById","DeleteInstruction","Inserter","active","setActive","circleRef","draggable","visible","comment","condition","sleep","InsertInstruction","BranchDing","offsetY","Limiter","Shape","BEGIN","PRIMITIVE","BRANCH","LIMITER","INPUT","LOOP","SWITCH","END","INSERTER","StartPoint","HeightOffset","Schema","layerRef","INITIAL_STATE","parseModel","nodes","setNodes","genSelector","prev","previous","genSimpleInstruction","temp_nodes","from","positionInParent","getDeepestLeftChild","getPrevious","find","parent_node","branchOffset","altbranchOffset","right","left_node","right_node","end","points","KonvaCanvas","useImage","grid","stageRef","backgroundRef","on","absolutePosition","fillPatternImage","SchemaControl","userService","translatedSchema","setTranslatedSchema","schemaName","setSchemaName","setUsername","getUserinfoById","user","updateSchema","hidden","last_changed","Form","Group","Control","onChange","target","disabled","updated","UpdateSchema","toJavaScript","blob","Blob","FileSaver","saveAs","handleSaveAsJavascript","Label","rows","readOnly","deleteSchema","ProjectTreeCurator","student","UserService","setRole","newname","UpdateData","getRole","getEmail","CuratorService","relation","curator","curatorService","StudentsSelector","selectUser","FetchStudents","users","setUsers","temp_users","getRelationsByCurator","relations","uuid_user","options","multi","searchBy","labelField","valueField","placeholder","values","EditorPage","title","Container","Col","xs","OverlayTrigger","placement","delay","show","hide","overlay","Tooltip","authStateService","useStyles","makeStyles","theme","root","image","backgroundImage","backgroundRepeat","backgroundColor","palette","grey","backgroundSize","backgroundPosition","paper","margin","spacing","display","flexDirection","alignItems","avatar","primary","light","form","marginTop","submit","Login","setRegisterData","repeatPassword","showPassword","registrationForm","setValues","errorHidden","setErrorHidden","errorMessage","setErrorMessage","classes","handleLoginSubmit","Authentificate","handleSignupSubmit","RegisterUser","component","maxWidth","CssBaseline","Typography","Avatar","noValidate","TextField","required","fullWidth","label","autoComplete","autoFocus","IconButton","aria-label","onMouseDown","event","preventDefault","edge","Visibility","VisibilityOff","Alert","color","handleAuthentificationButton","NotFoundPage","dismissible","Heading","LogoutButton","handleLogout","NavigationFooter","Navbar","fixed","bg","expand","Brand","href","Toggle","aria-controls","Collapse","Nav","Link","to","inline","aria-disabled","ConfirmDialog","handleOK","handleClose","Dialog","open","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","NotifyDialog","ChangePassword","Repeatpassword","showRepeatPassword","notifyDialog","openNotifyDialog","notifyMessage","setNotifyMessage","setVisible","changePassword","Fragment","Grid","item","sm","error","RenameForm","old","setOld","newName","setNew","RenameUser","dangerButton","borderColor","dark","main","AccountControl","dialog","openDialog","DeleteRegistrationData","UserCard","selectedUser","favorites","setFavorites","favorite","setFavorite","relationName","setRelationName","notify","openNotify","notifyText","setNotifyText","relation_name","updateRelation","FormControlLabel","control","Checkbox","FavoriteBorder","checkedIcon","Favorite","checked","createRelation","uuid_curator","DeleteRelation","favoriteCheck","Select","MenuItem","UpdateUserRole","UserList","GetAllUsers","noDataRenderer","UserManagement","ManagementPage","button","About","paragraph","size","startIcon","App","loggedInUser","getItem","foundUser","parse","TokenVerification","isLogged","setMeta","exact","path","DocPage","ReactDOM","render","getElementById","setPost","res","fetch","default"],"mappings":"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","file":"static/js/main.675ad70e.chunk.js","sourcesContent":["var map = {\n\t\"./DocPage\": [\n\t\t93\n\t],\n\t\"./DocPage.tsx\": [\n\t\t93\n\t],\n\t\"./TODO.md\": [\n\t\t239,\n\t\t3\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 232;\nmodule.exports = webpackAsyncContext;","import axios from 'axios';\r\nimport { loginResponseDTO } from '../DTO/IloginResponseDTO';\r\n\r\nexport class AuthStateService {\r\n    private static _instance: AuthStateService;\r\n    private static _accessToken: string | undefined;\r\n    private static _role: string | undefined;\r\n    private static _uuid: string | undefined;\r\n    private static _username: string | undefined;\r\n    private static _email: string | undefined;\r\n    private static BASE_API_PREFIX = \"/api/auth/\";\r\n\r\n\r\n    public setMeta(uuid: string, role: string, username: string, access_token: string, email: string) {\r\n        AuthStateService._uuid = uuid;\r\n        AuthStateService._role = role;\r\n        AuthStateService._username = username;\r\n        AuthStateService._accessToken = access_token;\r\n        AuthStateService._email = email;\r\n    }\r\n    constructor() {\r\n        // empty constructor\r\n    }\r\n\r\n    public getInstance(): AuthStateService {\r\n        if (!AuthStateService._instance) {\r\n            AuthStateService._instance = new AuthStateService();\r\n        }\r\n        return AuthStateService._instance;\r\n    }\r\n\r\n\r\n\r\n    public getToken(): string {\r\n        if (AuthStateService._accessToken) {\r\n            return AuthStateService._accessToken;\r\n        } else {\r\n            throw new Error(\"token is undefined\");\r\n        }\r\n    }\r\n\r\n    public getRole() : string {\r\n        if (AuthStateService._role) {\r\n            return AuthStateService._role;\r\n        } else {\r\n            throw new Error(\"token is undefined\");\r\n\r\n        }\r\n    }\r\n\r\n    public getUUID(): string {\r\n        if (AuthStateService._uuid) {\r\n            return AuthStateService._uuid;\r\n        } else {\r\n            throw new Error('uuid is not set');\r\n        }\r\n    }\r\n\r\n    public getUsername(): string {\r\n        if (AuthStateService._username) {\r\n            return AuthStateService._username;\r\n        } else {\r\n            throw new Error('username is not set');\r\n        }\r\n    }\r\n\r\n    public getEmail(): string {\r\n        if (AuthStateService._email) {\r\n            return AuthStateService._email;\r\n        } else {\r\n            throw new Error('email is not set');\r\n        }\r\n    }\r\n\r\n\r\n    public setUsername(name: string) {\r\n        AuthStateService._username = name;\r\n        if (AuthStateService._username) {\r\n            return AuthStateService._username;\r\n        } else {\r\n            throw new Error('username is not set');\r\n        }\r\n    }\r\n\r\n    public setRole(role: string) {\r\n        AuthStateService._role = role;\r\n        if (AuthStateService._role) {\r\n            return AuthStateService._role;\r\n        } else {\r\n            throw new Error('role is not set');\r\n        }\r\n    }\r\n\r\n\r\n    public async TokenVerification(token: string): Promise<boolean> {\r\n        const URL = process.env.REACT_APP_CLIENT_DOMAIN + AuthStateService.BASE_API_PREFIX + \"verify/\" + token;\r\n        return await axios.get(URL).then(() => {\r\n            return true\r\n        }).catch(() => {\r\n            return false\r\n        });\r\n    }\r\n\r\n    public async Authentificate(username: string, password: string): Promise<ResponsePayload> {\r\n        // here works proxy!!! \r\n        const URL = process.env.REACT_APP_CLIENT_DOMAIN + AuthStateService.BASE_API_PREFIX + \"login\";\r\n\r\n        try {\r\n            const response = await axios.post<loginResponseDTO>(URL, { username, password });\r\n            AuthStateService._accessToken = response.data.access_token;\r\n            AuthStateService._role = response.data.role;\r\n            AuthStateService._uuid = response.data.uuid;\r\n            AuthStateService._username = response.data.username;\r\n            AuthStateService._email = response.data.email;\r\n            return {\r\n                status: response.status,\r\n                statusText: response.statusText,\r\n                body: response.data\r\n            };\r\n        } catch (err) {\r\n            const responseData: ResponsePayload = { status: err.status, statusText: err.message };\r\n            if (err.response) {\r\n                responseData.statusText = err.response.data.message;\r\n            }\r\n            return responseData;\r\n        }\r\n    }\r\n\r\n    public async RegisterUser(username: string, password: string, email: string): Promise<ResponsePayload> {\r\n        const URL = process.env.REACT_APP_CLIENT_DOMAIN + AuthStateService.BASE_API_PREFIX + \"signup\";\r\n        try {\r\n            const response = await axios.post<loginResponseDTO>(URL, { username, password, email });\r\n            AuthStateService._accessToken = response.data.access_token;\r\n            AuthStateService._role = response.data.role;\r\n            AuthStateService._uuid = response.data.uuid;\r\n            AuthStateService._email = response.data.email;\r\n            AuthStateService._username = response.data.username;\r\n            return {\r\n                status: response.status,\r\n                statusText: response.statusText,\r\n                body: response.data\r\n            };\r\n        } catch (err) {\r\n            const responseData: ResponsePayload = { status: err.status, statusText: err.message };\r\n            if (err.response) {\r\n                responseData.statusText = err.response.data.message;\r\n            }\r\n            return responseData;\r\n        }\r\n    }\r\n\r\n    public Logout(): void {\r\n        AuthStateService._accessToken = AuthStateService._role = AuthStateService._uuid = \"\";\r\n    }\r\n\r\n    public async DeleteRegistrationData(uuid: string) {\r\n        try {\r\n            return await axios.delete(AuthStateService.BASE_API_PREFIX + \"delete\", {\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${AuthStateService._instance.getToken()}`,\r\n                    \"uuid\": uuid\r\n                }\r\n            });\r\n        } catch (err) {\r\n            const responseData: ResponsePayload = { status: err.status, statusText: err.message };\r\n            if (err.response) {\r\n                responseData.statusText = err.response.data.message;\r\n            }\r\n            return responseData;\r\n        }\r\n    }\r\n\r\n    public async changePassword(oldPassword: string, newPassword: string) {\r\n        const body = {\r\n            username: this.getUsername(),\r\n            password: oldPassword,\r\n            newPassword: newPassword\r\n        }\r\n        try {\r\n            return await axios.patch(AuthStateService.BASE_API_PREFIX + \"changePassword\", body );\r\n        } catch (err) {\r\n            const responseData: ResponsePayload = { status: err.status, statusText: err.message };\r\n            if (err.response) {\r\n                responseData.statusText = err.response.data.message;\r\n            }\r\n            return responseData;\r\n        }\r\n    }\r\n}\r\n\r\ntype ResponsePayload = {\r\n    status: number;\r\n    statusText: string;\r\n    body?: loginResponseDTO\r\n};\r\n","import { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport const InstructionType = {\r\n    SCHEMA: \"schema\",\r\n    PRIMITIVE: \"primitive\",\r\n    ACTION: \"action\",\r\n    CONDITION: \"condition\",\r\n    LIMITER: \"limiter\",\r\n    BRANCH: \"branch\",\r\n    INPUT: \"input\",\r\n    OUTPUT: \"output\",\r\n    LOOP: \"loop\",\r\n    SWITCH: 'switch',\r\n    COMMENT: 'comment',\r\n    SLEEP: 'sleep'\r\n} as const\r\n\r\n\r\n\r\nexport class DragonInstruction {\r\n    type: string;\r\n    id: string;\r\n    parent: string;\r\n    text: string;\r\n    // вложенные инструкции\r\n    children: DragonInstruction[];\r\n\r\n    constructor(type: string, parent: string) {\r\n        this.type = type;\r\n        this.parent = parent;\r\n        this.text = \"\";\r\n        this.id = uuidv4();\r\n        this.children = [];\r\n    }\r\n\r\n    public setMeta(meta: metadataInterface) {\r\n        this.type = meta.type;\r\n        this.parent = meta.parent;\r\n        this.text = meta.text;\r\n    }\r\n\r\n    public Add(instruction: DragonInstruction, uuid_next?: string) {\r\n        if (uuid_next) {\r\n            const pos = this.children.findIndex((element) => {\r\n                return element.id === uuid_next\r\n            });\r\n            this.children.splice(pos, 0, instruction);\r\n        } else {\r\n            this.children.push(instruction)\r\n        }\r\n    }\r\n\r\n    public Remove(uuid: string) {\r\n        const pos = this.children.findIndex((element) => {\r\n            return element.id === uuid\r\n        });\r\n        this.children.splice(pos, 1);\r\n    }\r\n\r\n    public Find(uuid: string) {\r\n        if (this.id === uuid) {\r\n            return this;\r\n        } else {\r\n            this.children.forEach(element => {\r\n                element.Find(uuid);\r\n            });\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport class DragonActionInstruction extends DragonInstruction {\r\n    constructor(parent: string) {\r\n        super(InstructionType.ACTION, parent);\r\n    }\r\n}\r\n\r\nexport class DragonSleepInstruction extends DragonInstruction {\r\n    constructor(parent: string) {\r\n        super(InstructionType.SLEEP, parent);\r\n    }\r\n}\r\n\r\nexport class DragonInputInstruction extends DragonInstruction {\r\n    constructor(parent: string) {\r\n        super(InstructionType.INPUT, parent);\r\n    }\r\n}\r\n\r\nexport class DragonOutputInstruction extends DragonInstruction {\r\n    constructor(parent: string) {\r\n        super(InstructionType.OUTPUT, parent);\r\n    }\r\n}\r\n\r\nexport class DragonCommentInstruction extends DragonInstruction {\r\n    constructor(parent: string) {\r\n        super(InstructionType.COMMENT, parent);\r\n    }\r\n}\r\n\r\nexport class DragonBranchInstruction extends DragonInstruction {\r\n    constructor(parent: string) {\r\n        super(InstructionType.BRANCH, parent);\r\n    }\r\n}\r\n\r\nexport class DragonConditionInstruction extends DragonInstruction {\r\n    constructor(parent: string, restore?: boolean) {\r\n        super(InstructionType.CONDITION, parent);\r\n        if (restore) {\r\n            return;\r\n        }\r\n        //if\r\n        this.Add(new DragonBranchInstruction(this.id));\r\n        //else\r\n        this.Add(new DragonBranchInstruction(this.id));\r\n        // limiter\r\n        this.Add(new DragonLimiterInstruction(this.id));\r\n    }\r\n}\r\n\r\nexport class DragonLimiterInstruction extends DragonInstruction {\r\n    constructor(parent: string, restore?: boolean) {\r\n        super(InstructionType.LIMITER, parent);\r\n        if (restore) {\r\n            return;\r\n        }\r\n    }\r\n}\r\n\r\nexport class DragonLoopInstruction extends DragonInstruction {\r\n    constructor(parent: string, restore?: boolean) {\r\n        super(InstructionType.LOOP, parent);\r\n        if (restore) {\r\n            return\r\n        }\r\n        this.Add(new DragonBranchInstruction(this.id));\r\n    }\r\n}\r\n\r\nexport class DragonSwitchInstruction extends DragonInstruction {\r\n    constructor(parent: string) {\r\n        super(InstructionType.SWITCH, parent);\r\n        this.Add(new DragonBranchInstruction(this.id));\r\n        this.Add(new DragonBranchInstruction(this.id));\r\n    }\r\n\r\n    addBranch(branch: DragonBranchInstruction) {\r\n        throw new Error('Not implemented');\r\n    }\r\n}\r\n\r\nexport class DragonSchemaInstruction extends DragonInstruction {\r\n    constructor() {\r\n        super(InstructionType.SCHEMA, \"\")\r\n    }\r\n}\r\n\r\nexport class DragonPrimitiveIstruction extends DragonInstruction {\r\n    constructor(parent: string) {\r\n        super(InstructionType.PRIMITIVE, parent)\r\n        this.text = \"Start\";\r\n    }\r\n}\r\n\r\n\r\nexport class DragonModel {\r\n    head: string\r\n    containers: Map<string, DragonInstruction> = new Map();\r\n\r\n    constructor() {\r\n        const dragonInstruction = new DragonSchemaInstruction();\r\n        this.head = dragonInstruction.id;\r\n        this.containers.set(\r\n            dragonInstruction.id,\r\n            dragonInstruction\r\n        )\r\n        this.Insert(new DragonPrimitiveIstruction(this.head));\r\n    }\r\n\r\n    public Insert(instruction: DragonInstruction, next?: string): void {\r\n\r\n        this.containers.get(instruction.parent)?.Add(instruction, next);\r\n        this.containers.set(instruction.id, instruction);\r\n        switch (instruction.type) {\r\n\r\n            case InstructionType.CONDITION:\r\n                {\r\n                    const ifInstruction = instruction.children[0];\r\n                    const elseInstruction = instruction.children[1];\r\n                    const limiter = instruction.children[2];\r\n                    this.containers.set(ifInstruction.id, ifInstruction);\r\n                    this.containers.set(elseInstruction.id, elseInstruction);\r\n                    this.containers.set(limiter.id, limiter);\r\n                }\r\n                break;\r\n\r\n            case InstructionType.LOOP:\r\n                instruction.children.forEach(value => {\r\n                    this.containers.set(value.id, value);\r\n                })\r\n                break;\r\n            case InstructionType.BRANCH:\r\n                throw new Error('manual branch insert not allowed');\r\n            default:\r\n\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    public toJSON(): JSON {\r\n        const jsonOjb = Object.create(null);\r\n        jsonOjb.head = this.head;\r\n        this.containers.forEach((value, key) => {\r\n\r\n            const arr: string[] = [];\r\n            value.children.forEach((value, key) => {\r\n                arr.push(value.id)\r\n            })\r\n            const iconD: metadataInterface = {\r\n                type: value.type,\r\n                text: value.text,\r\n                parent: value.parent,\r\n                children: arr\r\n            }\r\n            jsonOjb[key] = iconD;\r\n        })\r\n\r\n        return (jsonOjb);\r\n\r\n    }\r\n\r\n\r\n    \r\n\r\n    public Delete(parent: string, uuid: string) {\r\n        this.containers.get(parent)?.Remove(uuid);\r\n        this.containers.delete(uuid);\r\n    }\r\n\r\n\r\n    private RecursiveDelete(parent: DragonInstruction){\r\n        parent.children.forEach(child=>{\r\n            this.RecursiveDelete(child);\r\n            parent.Remove(child.id);\r\n            this.containers.delete(child.id);\r\n        })\r\n    }\r\n\r\n    private validate(){\r\n        this.containers.forEach(instruction=>{\r\n            const p  = this.containers.get(instruction.parent);\r\n            if(!p && instruction.type !== 'schema') {\r\n                this.containers.delete(instruction.id);\r\n            }\r\n        })\r\n    }\r\n\r\n    public DeleteById(uuid: string) {\r\n        const instruction = this.containers.get(uuid);\r\n        if (instruction) {\r\n            this.RecursiveDelete(instruction);\r\n            const p = this.containers.get(instruction.parent)?.Remove(uuid);\r\n            this.containers.delete(uuid);\r\n        }\r\n        this.validate();\r\n    }\r\n\r\n\r\n\r\n    public Find(uuid: string) {\r\n        return this.containers.get(this.head)?.Find(uuid);\r\n    }\r\n\r\n\r\n    public getInstruction(uuid: string) {\r\n        if (this.containers.get(uuid)){\r\n            return this.containers.get(uuid)!;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    public getDeepestLeftChild(uuid: string){\r\n        const icon = this.getInstruction(uuid);\r\n        let deepest = icon;\r\n\r\n        function deeper(icon: DragonInstruction){\r\n            deepest = icon;\r\n            if (icon.children.length > 0){\r\n                if (icon.type !== InstructionType.CONDITION && icon.type !== InstructionType.LOOP) {\r\n                    deeper(icon.children[icon.children.length -1])\r\n                } else {\r\n                    deeper(icon.children[0])\r\n                }\r\n            }\r\n        }\r\n        if (icon) {\r\n            deeper(icon)\r\n            return deepest;\r\n        } else \r\n        return undefined;\r\n    }\r\n\r\n    public Update(uuid: string, text: string) {\r\n        Promise.resolve(this.containers.get(uuid)).then(container => {\r\n            if (container)\r\n                container.text = text;\r\n            else\r\n                throw new Error(\"Instruction not found\")\r\n        }).catch(err =>\r\n            console.log(err));\r\n    }\r\n\r\n\r\n    private castInstruction<T extends DragonInstruction>(instruction: T, instruction_meta: metadataInterface) {\r\n        const val = instruction as T;\r\n        val.id = instruction_meta.id!;\r\n        val.text = instruction_meta.text;\r\n        val.parent = instruction_meta.parent;\r\n        this.containers.set(val.id, val);\r\n        if (val.parent) {\r\n            this.containers.get(val.parent)?.children.push(val);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private parseInstructionFromJSON(instruction_id: string, schema: any) {\r\n        const instruction: metadataInterface = schema[instruction_id];\r\n        instruction.id = instruction_id;\r\n\r\n        switch (instruction.type) {\r\n            case InstructionType.SCHEMA:\r\n                this.castInstruction(new DragonSchemaInstruction(), instruction);\r\n                break;\r\n\r\n            case InstructionType.PRIMITIVE:\r\n                this.castInstruction(new DragonPrimitiveIstruction(instruction.parent), instruction);\r\n                break;\r\n\r\n            case InstructionType.BRANCH:\r\n                this.castInstruction(new DragonBranchInstruction(instruction.parent), instruction);\r\n                break;\r\n\r\n            case InstructionType.ACTION:\r\n                this.castInstruction(new DragonActionInstruction(instruction.parent), instruction);\r\n                break;\r\n\r\n            case InstructionType.COMMENT:\r\n                this.castInstruction(new DragonCommentInstruction(instruction.parent), instruction);\r\n                break;\r\n\r\n            case InstructionType.CONDITION:\r\n                this.castInstruction(new DragonConditionInstruction(instruction.parent, true), instruction);\r\n                break;\r\n\r\n            case InstructionType.INPUT:\r\n                this.castInstruction(new DragonInputInstruction(instruction.parent), instruction);\r\n                break;\r\n\r\n            case InstructionType.LOOP:\r\n                this.castInstruction(new DragonLoopInstruction(instruction.parent, true), instruction);\r\n                break;\r\n\r\n            case InstructionType.OUTPUT:\r\n                this.castInstruction(new DragonOutputInstruction(instruction.parent), instruction);\r\n                break;\r\n\r\n            case InstructionType.SLEEP:\r\n                this.castInstruction(new DragonSleepInstruction(instruction.parent), instruction);\r\n                break;\r\n\r\n            case InstructionType.SWITCH:\r\n                this.castInstruction(new DragonSwitchInstruction(instruction.parent), instruction);\r\n                break;\r\n\r\n            case InstructionType.LIMITER:\r\n                this.castInstruction(new DragonLimiterInstruction(instruction.parent), instruction);\r\n                break;\r\n\r\n        }\r\n        const children: string[] = instruction.children;\r\n        children.forEach((value) => {\r\n            this.parseInstructionFromJSON(value, schema);\r\n        })\r\n    }\r\n\r\n    static restoreFromJSON(schema: any) {\r\n        const restored = new DragonModel();\r\n        restored.restoreFromJSON(schema);\r\n        return restored;\r\n    }\r\n\r\n    public restoreFromJSON(schema: any) {\r\n        this.head = schema.head;\r\n        this.containers.clear(); // clear previos state\r\n        this.parseInstructionFromJSON(this.head, schema);\r\n\r\n    }\r\n\r\n    public parseInstruction(instruction: DragonInstruction, code: string, deep = 0): string {\r\n        const offset = '\\t'.repeat(deep);\r\n        switch (instruction.type) {\r\n            case InstructionType.SCHEMA:\r\n                code = `[${instruction.children[0].id}]`;\r\n                code = this.parseInstruction(instruction.children[0], code, ++deep);\r\n                break;\r\n\r\n            case InstructionType.PRIMITIVE:\r\n                {\r\n                    let stringOfChildren = \"\";\r\n                    instruction.children.forEach((value) => {\r\n                        stringOfChildren += `${offset}[${value.id}]\\n`;\r\n                    })\r\n                    const generatedCode = `function ${instruction.text}() {\\n${stringOfChildren}\\n}`\r\n                    code = code.replace(`[${instruction.id}]`, generatedCode);\r\n                    instruction.children.forEach((value) => {\r\n                        code = this.parseInstruction(value, code, ++deep);\r\n                    })\r\n                }\r\n                break;\r\n\r\n            case InstructionType.ACTION:\r\n                if (instruction.text !== \"\")\r\n                    code = code.replace(`[${instruction.id}]`, instruction.text + \";\");\r\n                break;\r\n\r\n            case InstructionType.COMMENT:\r\n                if (instruction.text !== \"\")\r\n                    code = code.replace(`[${instruction.id}]`, `/*${instruction.text}*/`);\r\n                break;\r\n\r\n            case InstructionType.OUTPUT:\r\n                if (instruction.text !== \"\")\r\n                    code = code.replace(`[${instruction.id}]`, `console.log(${instruction.text});`);\r\n                break;\r\n\r\n            case InstructionType.INPUT:\r\n                if (instruction.text !== \"\")\r\n                    code = code.replace(`[${instruction.id}]`, `// Not implemented input for(${instruction.text});`);\r\n                break;\r\n\r\n            case InstructionType.SLEEP:\r\n                if (instruction.text !== \"\") {\r\n                    code = code.replace(`[${instruction.id}]`,  `await new Promise(resolve => setTimeout(resolve, ${instruction.text}));`);\r\n                    if (code.startsWith('function', 0))\r\n                        code = code.replace(`function`,  `async function`);\r\n                }\r\n                break;\r\n            // Condition SCOPES if {inner} else {inner2}\r\n            case InstructionType.CONDITION:\r\n                {\r\n                    const arrayOfChildren: string[] = [];\r\n                    instruction.children.forEach((value) => {\r\n                        arrayOfChildren.push(`[${value.id}]`);\r\n                    })\r\n                    const generatedCode = `if (${instruction.text}) {\\n${arrayOfChildren[0]}} else {\\n${arrayOfChildren[1]}}`\r\n                    code = code.replace(`[${instruction.id}]`, generatedCode);\r\n                    instruction.children.forEach((value) => {\r\n                        code = this.parseInstruction(value, code, ++deep);\r\n                    })\r\n                }\r\n                break;\r\n\r\n            // Condition SCOPES if {inner} else {inner2}\r\n            case InstructionType.LOOP:\r\n                {\r\n                    const generatedCode = `while (${instruction.text}) {\\n\\t[${instruction.children[0].id}]\\t}`\r\n                    code = code.replace(`[${instruction.id}]`, generatedCode);\r\n                    code = this.parseInstruction(instruction.children[0], code, ++deep);\r\n                }\r\n                break;\r\n\r\n            // BRANC SCOPES {inner}\r\n            case InstructionType.BRANCH:\r\n                {\r\n                    let stringOfChildren = \"\";\r\n                    instruction.children.forEach((value) => {\r\n                        stringOfChildren += `\\t[${value.id}]\\n`;\r\n                    })\r\n                    const generatedCode = stringOfChildren;\r\n                    code = code.replace(`[${instruction.id}]`, generatedCode);\r\n                    instruction.children.forEach((value) => {\r\n                        code = this.parseInstruction(value, code);\r\n                    })\r\n                }\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n        return code;\r\n    }\r\n\r\n    public toJavaScript(): string {\r\n        const code = ``;\r\n        return this.parseInstruction(this.containers.get(this.head)!, code);\r\n    }\r\n}\r\n\r\ntype metadataInterface = {\r\n    id?: string;\r\n    type: string;\r\n    parent: string;\r\n    text: string;\r\n    children: Array<string>\r\n}","import axios from 'axios';\r\nimport { DragonModel } from '../dragon/dragon.model/dragon.model';\r\nimport { CreateSchemaDTO } from '../DTO/CreateSchemaDTO';\r\nimport { AuthStateService } from './AuthStateService';\r\n\r\nexport type SchemaDTO = {\r\n    uuid: string;\r\n    name: string;\r\n    idUser: string;\r\n    data: JSON;\r\n    last_changed: string;\r\n    last_changed_by_id: string;\r\n}\r\n\r\nconst BASE_API_PREFIX = \"/api/schema\";\r\n\r\nexport class SchemaService {\r\n    private static _instance: SchemaService;\r\n    private static _authService : AuthStateService;\r\n    private static _schema: DragonModel | undefined;\r\n\r\n    constructor(authService : AuthStateService){\r\n        SchemaService._authService = authService.getInstance();\r\n    }\r\n    public setModel(model: DragonModel){\r\n        SchemaService._schema = model;\r\n    }\r\n\r\n    public getModel() {\r\n        return SchemaService._schema;\r\n    }\r\n\r\n    public getInstance(): SchemaService {\r\n        if (!SchemaService._instance){\r\n            SchemaService._instance = new SchemaService(SchemaService._authService);\r\n        }\r\n        return SchemaService._instance;\r\n    }\r\n    private setTokenBearer(){\r\n        return {\r\n            \"Authorization\" : `Bearer ${SchemaService._authService.getToken()}`\r\n        }\r\n    }\r\n\r\n    public async getUserSchemas(user_id : string) : Promise<SchemaDTO[]> {\r\n        return axios.get<Array<SchemaDTO>>(`${BASE_API_PREFIX}/user/${user_id}`, {\r\n            headers : this.setTokenBearer(),\r\n        })\r\n        .then(response => {\r\n            return response.data;\r\n        })\r\n        .catch(() => {\r\n            throw new Error(\"unable to get schemas\");\r\n        })\r\n    }\r\n\r\n\r\n    public async createNewSchema(user_id: string) : Promise<SchemaDTO | undefined> {\r\n        const schema: CreateSchemaDTO = {\r\n            name: \"NewSchema\",\r\n            idUser: user_id,\r\n            last_changed_by_id: user_id,\r\n            data: new DragonModel().toJSON()\r\n        }\r\n        return axios.post<SchemaDTO>(`${BASE_API_PREFIX}/create`, schema, {\r\n            headers : this.setTokenBearer()\r\n        })\r\n        .then(response => {\r\n            return response.data;\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            return undefined;\r\n        });\r\n    }\r\n\r\n    public updateSchema(schema: SchemaDTO): Promise<SchemaDTO | undefined> {\r\n        schema.last_changed_by_id = SchemaService._authService.getUUID();\r\n        return axios.put<SchemaDTO>(`${BASE_API_PREFIX}/${schema.uuid}`, schema, {\r\n            headers : this.setTokenBearer()\r\n        })\r\n        .then(response => {\r\n            return response.data;\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            return undefined;\r\n        });\r\n    }\r\n\r\n    public deleteSchema(id: string): Promise<any> {\r\n        return axios.delete<SchemaDTO>(`${BASE_API_PREFIX}/${id}`, {\r\n            headers : this.setTokenBearer()\r\n        })\r\n        .then(response => {\r\n            return response.data;\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            return undefined;\r\n        });\r\n    }\r\n}","import React from 'react';\r\nimport { Button, Image, Card, Row } from 'react-bootstrap';\r\nimport action from '../../../images/action.png'\r\nimport comment from '../../../images/comment.png'\r\nimport input from '../../../images/input.png'\r\nimport loop from '../../../images/loop.png'\r\nimport output from '../../../images/output.png'\r\nimport pause from '../../../images/pause.png'\r\nimport question from '../../../images/question.png'\r\nimport variant from '../../../images/variant.png'\r\nimport './ActionMenu.scss'\r\n\r\ntype Props ={\r\n    setActionMenuOption: (value: number) => void;\r\n}\r\n\r\nconst ActionMenuOptions = {\r\n    ACTION: 1,\r\n    COMMENT: 2,    \r\n    INPUT: 3,\r\n    OUTPUT: 4,\r\n    QUESTION: 5,\r\n    LOOP: 6,\r\n    VARIANT: 7,\r\n    PAUSE: 8,\r\n    DELETE: 9,\r\n    RESET: 0,\r\n}\r\n\r\n\r\nexport const ActionMenu: React.FC<Props> = (props) => {\r\n\r\n    //const images: any = {action, comment, input, loop, output, pause, question, variant};\r\n\r\n\r\n    return (\r\n        <Card>\r\n            <Card.Header>Иконы</Card.Header>\r\n            <Card.Body>\r\n                <Row>\r\n                    <Button className=\"img-button\">\r\n                        <Image rounded src={action} fluid onClick={()=>{props.setActionMenuOption(ActionMenuOptions.ACTION)}}/>\r\n                    </Button>\r\n                    <Button className=\"img-button\">\r\n                        <Image rounded src={comment} onClick={()=>{props.setActionMenuOption(ActionMenuOptions.COMMENT)}} fluid />\r\n                    </Button>\r\n                </Row>\r\n                <Row>\r\n                    <Button className=\"img-button\">\r\n                        <Image rounded src={input} fluid onClick={()=>{props.setActionMenuOption(ActionMenuOptions.INPUT)}}/>\r\n                    </Button>\r\n                    <Button className=\"img-button\">\r\n                        <Image rounded src={output} fluid onClick={()=>{props.setActionMenuOption(ActionMenuOptions.OUTPUT)}}/>\r\n                    </Button>\r\n                </Row>\r\n                <Row>\r\n                    <Button className=\"img-button\">\r\n                        <Image rounded src={question} fluid onClick={()=>{props.setActionMenuOption(ActionMenuOptions.QUESTION)}}/>\r\n                    </Button>\r\n                    <Button className=\"img-button\">\r\n                        <Image rounded src={loop} fluid onClick={()=>{props.setActionMenuOption(ActionMenuOptions.LOOP)}}/>\r\n                    </Button>\r\n                </Row>\r\n                <Row>\r\n                    <Button className=\"img-button\">\r\n                        <Image rounded src={variant} fluid onClick={()=>{props.setActionMenuOption(ActionMenuOptions.VARIANT)}}/>\r\n                    </Button>\r\n                    <Button className=\"img-button\">\r\n                        <Image rounded src={pause} fluid onClick={()=>{props.setActionMenuOption(ActionMenuOptions.PAUSE)}}/>\r\n                    </Button>\r\n                </Row>\r\n                <Row>\r\n                    <Button className=\"img-button\" variant={'danger'} onClick={()=>{props.setActionMenuOption(ActionMenuOptions.DELETE)}}>\r\n                        X\r\n                    </Button>\r\n                    <Button className=\"img-button info\" variant={'warning'} onClick={()=>{props.setActionMenuOption(ActionMenuOptions.RESET)}}>\r\n                        R\r\n                    </Button>\r\n                </Row>\r\n            </Card.Body>\r\n        </Card>\r\n    )\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADoElEQVR4nO2bTWsTQRjH/zM7s0lr027VWl8OglpF0FpQwRdExYPfQLwIHjwqIvgB/ATiQRDBi3rQL+DBmxePtb5WKVUUrcWKbdRsssnuzshs6ks0xqLMzhTndwrZwPN//vPsJvM8E3L7bUUmUiJP/O4iym+ncfvSeaxeP4S9R49DUg9pEueqgxECVktFrkEV3UWGuQ+zuHLxAraPbM0MEIwjbjRy1RFDgnJKcg2qEAKgjKFACYLlg1BLIHOuQoXKneYe1TKcARZoMIozwAINRnEGWKDBKM4ACzQYxRlggQaj/PcGsLZvFooglKodipagvKsZQ6rdGKXgxW6kXO2IurTEI4QgSRKkjXr2+kfaGuCJBFQSXfmDpSyLAagYAl4agxIOmSZa4qmcpRBI8evOl9ya+ixj0czU832kUYSb587i9eQzLOnt0yKIMY5q5TOejo2iFARYt3kLKCUQQk9v4uPMOxw8cgyHTpxErRpBiDR7X22HWyrA8zyoS/fu3sHExCQ8AqQat+mMEszMljH54qW2GAWPoJ5KbBjZDp9T1DrdAl+bEr39y8Dpcwxt2ohtw8PZyphoWPwLjDOEYRVjo6N4MzWNYk8J7Qqs7TNAoW6LHTt24uq163ZmuADK5TL27dkFMTX92w93/BpcbKv+M83K7fxc6WjA14fFYqWxgCbrf/9DyBlggQajOAMs0GAUZ4AFGoziDLBAg1GcARZoMIozwAINRnEGWKDBKM4ACzQYxRlggQZt/DwFakdHAzj3F1nKrfT1BSCk8xr/ti2upiaPHozhzOlTWXd4sTWI1cyxGoYIw0rHVW41YL5iorACISTGHz/B6P1H+kQS0jRXWwSgr4tnJ1GTqI52d0TrZGi+hT6wag0+fZhBT7BMiyhC1bQ2xqe5OTDuo6RmkNkEU4MVBCi8eY2e/n4kWX6tMVqGo80SkIirYTYTkAt4iPwNvUt78erhOM4c3oXd+w/g9OUbSHkBcVTVEg9Cgvk+eLGrZdjzy3AUWbEQ9AwMwqP6xuNBAMwOrICQEh73EawczM4HJLVASzy1jkkjRj2q/el8QPNiPaxoEfItqF9CFIYg6nxAmqJWqUKoCqhpqoB52n0tuh9CFmgwijPAAg1GcQZYoMEozgALNBjFGWCBBqM4AyzQYBQjBjS3/gINIdGIIrMGfO8F5IfaZqteXZEAfoEbS17lbuTv857H0KhV8X5iHLxUwsDa9ZCUZkfa84QRgi+mPz0pZhp0DQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEuklEQVR4nO2bfUxVZRzHv+ece869vHm5RBKEoKyyiJqS0ayx3NKV65V0unS1nNpWW7LV1qplW+A/9uaGYbW2kmkjZKVEq4QVlZr2ulYjUiJJBCSCC/dyOa/3PO2cWbly7ZznAs9pnM92/mHsnO/vc95+z+/eyxFCTgIIY3YybgnQAQRmqQCDBxD3QBBWxPnZWfff+AI8kIEpvgCWBx8di+H74z0wTZNZBqYCtr3eiBsfq8EHR75iloGZAEIIekdGMTYpo39klFUMtldARlACghKCosgsg/8Q9EAGpvgCPJCBKb4AD2Rgii/AAxmY4gvwQAamMBPAcRx4ngOMJNKslpgRjoehfYO/IRqLQQykPj+1ijdNAlXVkZ+Zgb4zw+j5tR+aobvel6EbmJsbQV7uBXRZCCHWUizyX/904OMjeK7pgH3GREGw/5ZMmkgSQndQjrNXg5wggOMAmAQCx0FPJl3ux7qATGQGJTyzcR2uX1TmNkrU0emclBV83j+A6woLkDw7vEiXREwmJqG5DH0uIVGEyPNQDcPeONuGM3hwIBwQkiR0Dg2j+9QAjQBnt8DqFZXo6T+DxkNHkZEWQkgMoLQgHxtuXW4LSCgKnYEUCPA8xuMJvPp+O4ZiMerniCMBkiRh6wPrUbagCNsa38agosDsPYWru3/BpqqVM1PxeTB1A2+0dUDVDOp9uHoLVK2oxJ4nqnHtvEL0x+KoaW7BxtodONHbRx0gFUbjEyDEdHXr/BPXr8HSSxdg56MPYm1FOYImh/au43jo+V3oOPbN9Fc8DVD1Abk5YWyv3oQn77kLEVFC13AUW17ejZea3vV6vf8ipUZow503Y1f1Zlwz7yJohKCu9SC2PFuPod/ZDTndknIneEP5VdhX8ziWLbwE4fQ0NBz7GjvefGfGC6FlSlrh7tMDkHXDbm6s18qF2XOYFENDyn3t3vfaUd/ahsGJBLIkEU/dfRseXnMHk2JooBagqhq2734LDZ8dhWIQFIUz8fS9a7CysoJpQW6hEtDVfRK1e5rxyU8/QxIFLLusBLWb16Ok6GKmxdDgWsCHh77EC/ta0Dk8gjlBEWuXVqB6XRVy/kf3/bk4F0AIdja1oK61DUExgEWFeXhk1e1YvnTJTOQ8L7nZYQgcD51yVWrhSEB0LI6trzTg4A8/Ii+cBWs9eHl+vuUE+z86DE13v45PFav5TcgKErqOcJD+s0VHApraOlDfcRhLigshG4Zt/dOuE2j+4luYKdjPtlaWAQExVcO4qkF02dMLPI9IZgbGFA2yqlFlcCTgypJirFpcBj1pQjo7EUoSE8W5OVQH/XMgEpMVew4wNxJGdno6VIoryZoilRbkYfHCErosTiZCFoqiIjaR+GsilBIcZw9Wqutew/7vOvHifatx/y03UZ1Fa4pkPYADdKM6ZxMhi1AoaG9TiSAIkDUN4YxMhNLT7G2mYfoNEWsDz0Mz6AcaqeJ/LuCBDEzxBXggA1N8AR7IwBRfgAcyMMUX4IEMTGEqYEKRAVmBrNMtZacCpt8QKZ8/H6X5ebiikN0s0fFyeDowDAPxhIxIOIvF4S2iTAV4gKj/EPRABqb4AjyQgSmz/sfTVuGnZ+3P54HxPwBbyKBDh7QlQQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEY0lEQVR4nO2bfWgbdRjHv/eeJmmbkDatrX3RZG62rqv9o05l6L8yEP8TEQe22JWi7cb+mMigFASnlqFuUylzEau1UHFuE1/GVnGs84UhONCKb93qOru0W+qSay53uTu5E4WJrLmf3X6X9T4h/4Q8v9/3+Sb88jzP5RjTNE2sYNiVnLyFZ4ALNFDFM8AFGqjiGUBtZ9PEj2dncDktU5NgQc2ATyZO4d4tO/BsYpSWBBtqBvyaTGI+ncEvySQtCTbUDCgRRcAnIiBJtCTYeIegCzRQxTPABRqo4hngAg1U8QxwgQaqeAa4QANV6JXCggjkdbAs3c+AJw2cu7SAmQtzEAXBcawk8PjtQhKVwSByORXf/3wGDMNgqQG1aT10A7H6WpSU+EilXwHRWPzr05PoT4wglVkEz3GONxU4DpppgGU5mKZhJ8Uw9ojgqlhSNcNAQ0UEz21+DPHGOsd7/xuib8APZ6Zx+tws6iJhZFTVfs2Jj9Z7JZ6HxP+VkKJpBcUJLAtZ0zAxdRY9u17HS71PoCneSJLCPxAZ4BNFiAKHiqAf3RsfQlnQD/06XF+xTPvp3O/Ye/hTTF68iG2792Gg4xG0r2smXpP4DMipeYi8gI0b2sHwxMs45p62tYiGQ9g29Ba+m5vH5l1DeG1rF9a3kplAfAT/fWhdSmeWK7eCeWBDO3Z2PopoIIBUXsPWVxM4cepborWKtg548P67seepTtQG/JjOZLB9aBjjX33jeJ2iLoTWtzRhb18X6v0BzMiL6HllHw4cO+FojaKvBFubb8PLvZ24tbwMeY5F//AYxo58XnD8DVEKt7c04c0dW3BHdRVMhsH2/e9icmq6oNgbpheQszloeh6aoSPi90Es8Jfp+v1+XUMOjZ/E86PvY1ZeRE0wgJ3dmxCrqylow6I34MPjX+LpxAgyuo4qn4TBnsdx17qmguOL2oCDn53EM4kRZE0Dt5SX4YXuTY6StyhaAw6MT2Dg7TFcVvNoqY1isKcDt8ec9wXEBmimCY5hEAmVky5BzPChI3jxvcOYVzWsjoTspmhVA1lnSGxAuSRA1lS88cHHCPh8S7ayywHHspg6P4t3jn+BlJ5H602V2N3XhRhh8hZEBiiqirSi4vxCGgOjB6EbhqN43TBR6hNRJolQ8joWsgp0K8El4liGgWH1IAzQVlONwSc7EPufMwEiA1pXx3HfmlVQVAXxaMRxvCQISMkyMoqKMM9hTW11YRMh00RO09AYrUS/1QxVhEnkXwHxHyWtUVZalsGzzidCJZKI/R8dRe/wGB6+cy329HUBjD3zuiqGNRIzTUTCIRLJ/wnxGSBJov0kpdQfQF5VwXEcQqGyZUvIKdRKYatsBcs6GqVdC7zrAi7QQBXPABdooIpngAs0UMUzwAUaqOIZ4AINVKFmQNa6qpxVkFGUlWlAc/3NiFdXoa2xgZYEG6r3Dab+SKM04AfPO2+plwvvxkkXaKCKZ4ALNFDFM8AFGqiysg0A8CeseWf19F+PDgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import React, { FC, createContext } from 'react';\r\nimport { loginResponseDTO } from '../DTO/IloginResponseDTO';\r\n\r\nconst initialTokenState : loginResponseDTO = {\r\n    access_token: undefined,\r\n    role : undefined,\r\n    username : undefined,\r\n    uuid : undefined,\r\n    email : undefined,\r\n}\r\n\r\n\r\nexport type UserAction = {\r\n    type :'LOGIN' | 'LOGOUT' | 'SIGNUP' | 'UPDATE';\r\n    payload: loginResponseDTO\r\n}\r\n\r\nconst userReducer = (state : loginResponseDTO, action : UserAction) :loginResponseDTO => {\r\n    switch (action.type) {\r\n      case \"SIGNUP\":\r\n      case \"LOGIN\":\r\n        localStorage.setItem('user', JSON.stringify(action.payload));\r\n        return  action.payload;\r\n      case \"LOGOUT\":\r\n        localStorage.clear();\r\n        return initialTokenState\r\n      case \"UPDATE\":\r\n        localStorage.clear();\r\n        localStorage.setItem('user', JSON.stringify(action.payload));\r\n        return action.payload;\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n\r\n  interface UserContextProps {\r\n    state: loginResponseDTO;\r\n    dispatch: React.Dispatch<UserAction>;\r\n  }\r\n\r\nexport const UserContext = createContext({} as UserContextProps);\r\n\r\n  \r\n// eslint-disable-next-line\r\nexport const UserProvider : FC = (props: any) => {\r\n    const [state, dispatch] = React.useReducer(userReducer, initialTokenState);\r\n\r\n    return(\r\n        <UserContext.Provider value={{state, dispatch}}>\r\n            {props.children}\r\n        </UserContext.Provider>\r\n    )\r\n}","import React, { FC, useContext, useEffect, useState } from 'react';\r\nimport {Button, ListGroup } from 'react-bootstrap';\r\nimport { UserContext } from '../../../context/user.provider';\r\nimport { AuthStateService } from '../../../services/AuthStateService';\r\nimport { SchemaService, SchemaDTO } from '../../../services/SchemaService';\r\nimport CreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\r\n\r\ntype Props = {\r\n    schemaService: SchemaService,\r\n    setSchema: (value: SchemaDTO) => void;\r\n    schema : SchemaDTO | undefined;\r\n}\r\n\r\nexport const ProjectTree: FC<Props> = ({ schemaService, setSchema, schema }) => {\r\n    const { state } = useContext(UserContext);\r\n    const [schemas, setSchemas] = useState<SchemaDTO[]>([]);\r\n\r\n\r\n    const CreateSchema = async ()=> {\r\n        const generatedSchema = await schemaService.createNewSchema(state.uuid!);\r\n        if (generatedSchema) {\r\n                setSchema(generatedSchema);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (state)\r\n        if (state.uuid) {\r\n            schemaService.getUserSchemas(state.uuid)\r\n                .then(schemas => setSchemas(schemas))\r\n                .catch(_err => console.log(_err))\r\n        }\r\n    }, [schema]);\r\n\r\n    return (\r\n        <ListGroup>\r\n            {schemas.map((scheme) => (\r\n                <ListGroup.Item\r\n                    key={scheme.uuid}\r\n                    action variant={scheme.uuid === schema?.uuid ? `info` : ''}\r\n                    onClick={() => setSchema(scheme)}>\r\n                    {scheme.name}\r\n                </ListGroup.Item>\r\n            ))}\r\n            <ListGroup.Item onClick={()=> CreateSchema()} as={Button} variant=\"warning\"><CreateNewFolderIcon/>Создать схему</ListGroup.Item>\r\n        </ListGroup>\r\n    )\r\n}","\r\nexport const WIDTH = 160;\r\nexport const HEIGHT = 40;\r\n\r\n\r\n","import React from \"react\";\r\nimport { Text } from 'konva/lib/shapes/Text';\r\nimport { DragonModel } from \"../../../dragon/dragon.model/dragon.model\";\r\n\r\n\r\n// NATIVE JS Function for update KonvaObject Text\r\n\r\nexport function Updatetext(textRef: Text, id: string, model: DragonModel){\r\n    if(textRef){\r\n        const textPosition = textRef.getAbsolutePosition();\r\n\r\n    const areaPosition = {\r\n      x: textPosition.x + 300,\r\n      y: textPosition.y,\r\n    };\r\n\r\n    // create textarea and style it\r\n    const textarea = document.createElement('textarea');\r\n    document.body.appendChild(textarea);\r\n\r\n    textarea.value = textRef.text();\r\n    textarea.style.position = 'absolute';\r\n    textarea.style.top = areaPosition.y + 'px';\r\n    textarea.style.left = areaPosition.x + 'px';\r\n    textarea.style.width = textRef.width().toString();\r\n\r\n    textarea.focus();\r\n    textarea.addEventListener('keydown',(e)=>{\r\n        if (e.keyCode === 13) {\r\n            textRef!.text(textarea.value);\r\n            model.getInstruction(id)!.text = textRef!.text();\r\n            document.body.removeChild(textarea);\r\n          }\r\n    });\r\n\r\n}\r\n}","import React, { FC, useContext, useEffect, useRef, useState } from 'react';\r\nimport { Group, Rect, Text, Shape } from 'react-konva';\r\nimport { Text as _text } from 'konva/lib/shapes/Text';\r\nimport { Rect as _rect } from 'konva/lib/shapes/Rect';\r\nimport { Group as _group } from 'konva/lib/Group';\r\nimport { Shape as _shape} from 'konva/lib/Shape';\r\nimport { HEIGHT, WIDTH } from './CONSTRAINTS';\r\nimport { Updatetext } from './Functions';\r\nimport { DragonModel } from '../../../dragon/dragon.model/dragon.model';\r\n\r\n\r\nexport type IconProps = {\r\n    text: string,\r\n    x: number,\r\n    y: number,\r\n    id: string,\r\n    model: DragonModel\r\n}\r\n\r\n\r\nexport const Begin: FC<IconProps> = ({ text, id, x ,y, model}) => {\r\n    const [textWidth, setTextWidth] = useState(0);\r\n    const [textHeight, setTextHeight] = useState(0);\r\n    const rectRef = useRef<_rect>(null);\r\n    const textRef = useRef<_text>(null);\r\n    const groupRef = useRef<_group>(null);\r\n\r\n\r\n    if (groupRef.current && rectRef.current)\r\n    groupRef.current.clip({\r\n        x: rectRef.current.x(),\r\n        y: rectRef.current.y(),\r\n        width: rectRef.current.width(),\r\n        height: rectRef.current.height(),\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (textRef.current) {\r\n            setTextWidth(textRef.current.width());\r\n            setTextHeight(textRef.current.height());\r\n            textRef.current.setText(text);\r\n        }\r\n    }, [textWidth, textHeight])\r\n\r\n        \r\n    useEffect(() => {\r\n        if (textRef.current) {\r\n            setTextWidth(textRef.current.width());\r\n            setTextHeight(textRef.current.height());\r\n        }\r\n    }, [text])\r\n\r\n    return (\r\n        <Group id={id} ref={groupRef} width={WIDTH}>\r\n            <Rect \r\n            ref={rectRef}\r\n            width={WIDTH/2} \r\n            height={HEIGHT} \r\n            x={x+WIDTH/4} y={y}\r\n            cornerRadius={50}\r\n            stroke=\"black\" strokeWidth={1} fill=\"white\" />\r\n            <Text \r\n            ref={textRef}\r\n            text={text}\r\n            x={ x + WIDTH/4 + (rectRef.current ? rectRef.current.width() / 2 : 0)}\r\n            y={y}\r\n            offsetX={textWidth / 2}\r\n            align=\"center\"\r\n            onDblClick={()=>(Updatetext(textRef.current!,id, model))}\r\n            height={rectRef.current ? (rectRef.current.height()) : 0}\r\n            verticalAlign='middle'\r\n            />\r\n        </Group>\r\n    );\r\n}\r\n\r\nexport const Condition: FC<IconProps> = ({ text, id, x ,y, model}) => {\r\n    const [textWidth, setTextWidth] = useState(0);\r\n    const [textHeight, setTextHeight] = useState(0);\r\n    const shapeRef = useRef<_shape>(null);\r\n    const textRef = useRef<_text>(null);\r\n    const groupRef = useRef<_group>(null);\r\n\r\n\r\n    if (groupRef.current && shapeRef.current)\r\n    groupRef.current.clip({\r\n        x: shapeRef.current.x(),\r\n        y: shapeRef.current.y(),\r\n        width: shapeRef.current.width(),\r\n        height: shapeRef.current.height(),\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (textRef.current) {\r\n            setTextWidth(textRef.current.width());\r\n            setTextHeight(textRef.current.height());\r\n        }\r\n    }, [textWidth, textHeight])\r\n\r\n    useEffect(() => {\r\n        if (textRef.current) {\r\n            setTextWidth(textRef.current.width());\r\n            setTextHeight(textRef.current.height());\r\n            textRef.current.setText(text);\r\n        }\r\n    }, [textWidth, textHeight])\r\n\r\n    return (\r\n        <Group ref={groupRef}>\r\n            <Shape\r\n            sceneFunc={(context, shape) => {\r\n              context.beginPath();\r\n              context.moveTo(0, HEIGHT/2);\r\n              context.lineTo(WIDTH/2, 0);\r\n              context.lineTo(WIDTH, HEIGHT/2);\r\n              context.lineTo(WIDTH/2, HEIGHT);\r\n              context.closePath();\r\n              // (!) Konva specific method, it is very important\r\n              context.fillStrokeShape(shape);\r\n            }}\r\n            fill=\"white\"\r\n            stroke=\"black\"\r\n            strokeWidth={1}\r\n          />\r\n            <Text \r\n            ref={textRef}\r\n            text={text}\r\n            x={WIDTH/2}\r\n            y={HEIGHT/2}\r\n            offsetX={textWidth / 2}\r\n            align=\"center\"\r\n            onDblClick={()=>(Updatetext(textRef.current!,id, model))}\r\n            height={shapeRef.current ? (shapeRef.current.height()) : 0}\r\n            verticalAlign='middle'\r\n            />\r\n        </Group>\r\n    );\r\n}","import React, { FC, useEffect, useRef, useState } from 'react';\r\nimport { Group, Rect, Shape, Text } from 'react-konva';\r\nimport { Rect as _rect } from 'konva/lib/shapes/Rect';\r\nimport { Text as _text } from 'konva/lib/shapes/Text';\r\nimport { Group as _group } from 'konva/lib/Group';\r\nimport { HEIGHT, WIDTH } from './CONSTRAINTS';\r\nimport { DragonModel } from '../../../dragon/dragon.model/dragon.model';\r\nimport { Updatetext } from './Functions';\r\nimport { Shape as ShapeType } from './Schema';\r\n\r\n\r\ntype IconProps = {\r\n    text: string,\r\n    x: number,\r\n    y: number,\r\n    id: string,\r\n    parent: string;\r\n    model: DragonModel;\r\n    actionMenuOption: number;\r\n    setModel: (value: DragonModel) => void;\r\n    type?: string;\r\n}\r\n\r\nexport const Action: FC<IconProps> = ({ text, id, parent, x ,y, model, setModel, actionMenuOption, type}) => {\r\n    const [textWidth, setTextWidth] = useState(0);\r\n    const [textHeight, setTextHeight] = useState(0);\r\n    const rectRef = useRef<_rect>(null);\r\n    const textRef = useRef<_text>(null);\r\n    const groupRef = useRef<_group>(null);\r\n\r\n    useEffect(()=>{\r\n        groupRef.current?._clearCaches();\r\n        textRef.current?._clearCaches()\r\n        textRef.current?._clearCaches()\r\n    })\r\n\r\n    if (groupRef.current && rectRef.current)\r\n    groupRef.current.clip({\r\n        x: rectRef.current.x(),\r\n        y: rectRef.current.y(),\r\n        width: rectRef.current.width(),\r\n        height: rectRef.current.height(),\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (textRef.current) {\r\n            setTextWidth(textRef.current.width());\r\n            setTextHeight(textRef.current.height());\r\n        }\r\n    }, [textWidth, textHeight])\r\n\r\n    \r\n    useEffect(() => {\r\n        if (textRef.current) {\r\n            setTextWidth(textRef.current.width());\r\n            setTextHeight(textRef.current.height());\r\n        }\r\n    }, [text])\r\n\r\n    function DeleteInstruction(){\r\n        if( actionMenuOption === 9){\r\n            const m = DragonModel.restoreFromJSON(model.toJSON());\r\n            m.DeleteById(id);\r\n            setModel(m);\r\n        }\r\n    }\r\n\r\n    let element = <Rect/>\r\n\r\n    switch (type) {\r\n        case ShapeType.ACTION:\r\n            element = <Rect ref={rectRef} \r\n            width={WIDTH} \r\n            height={HEIGHT}\r\n            x={x} y={y}\r\n            stroke={actionMenuOption === 9? \"red\" : 'black'} strokeWidth={actionMenuOption === 9? 4 : 2} fill=\"white\" />\r\n            break;\r\n\r\n    \r\n        case ShapeType.COMMENT:\r\n            element = <Group>\r\n                <Rect ref={rectRef} \r\n                width={WIDTH} \r\n                height={HEIGHT}\r\n                x={x} y={y}\r\n                stroke={actionMenuOption === 9? \"red\" : 'black'} strokeWidth={actionMenuOption === 9? 4 : 2} fill=\"white\" />\r\n                <Rect \r\n                width={WIDTH-10} \r\n                height={HEIGHT-10}\r\n                cornerRadius={10}\r\n                x={x+5} y={y+5}\r\n                stroke=\"black\" strokeWidth={1} fill=\"white\" />\r\n            </Group> \r\n            break;\r\n\r\n\r\n            case ShapeType.OUTPUT:\r\n                element = <Group>\r\n                <Rect ref={rectRef} \r\n                width={WIDTH} \r\n                height={HEIGHT}\r\n                x={x} y={y}\r\n                />\r\n                <Shape\r\n                    sceneFunc={(context, shape) => {\r\n                    context.beginPath();\r\n                    context.moveTo(x, y);\r\n                    context.lineTo(x + WIDTH -30, y);\r\n                    context.lineTo(x + WIDTH, y + HEIGHT/2);\r\n                    context.lineTo(x + WIDTH-30, y + HEIGHT);\r\n                    context.lineTo(x, y+HEIGHT);\r\n                    context.closePath();\r\n                    // (!) Konva specific method, it is very important\r\n                    context.fillStrokeShape(shape);\r\n                    }}\r\n                    fill=\"white\"\r\n                    stroke={actionMenuOption === 9? \"red\" : 'black'}\r\n                    strokeWidth={actionMenuOption === 9? 4 : 2}\r\n                />\r\n            </Group>\r\n            break;\r\n\r\n            case ShapeType.SLEEP:\r\n                element = <Group>\r\n                <Rect ref={rectRef} \r\n                width={WIDTH} \r\n                height={HEIGHT}\r\n                x={x} y={y}\r\n                />\r\n                <Shape\r\n                    sceneFunc={(context, shape) => {\r\n                    context.beginPath();\r\n                    context.moveTo(x, y);\r\n                    context.lineTo(x + WIDTH, y);\r\n                    context.lineTo(x + WIDTH -30, y + HEIGHT);\r\n                    context.lineTo(x + 30, y + HEIGHT);\r\n                    context.closePath();\r\n                    // (!) Konva specific method, it is very important\r\n                    context.fillStrokeShape(shape);\r\n                    }}\r\n                    fill=\"white\"\r\n                    stroke={actionMenuOption === 9? \"red\" : 'black'}\r\n                    strokeWidth={actionMenuOption === 9? 4 : 2}\r\n                />\r\n            </Group>\r\n            break;\r\n\r\n            case ShapeType.CONDITION:\r\n                element = <Group>\r\n                <Rect ref={rectRef} \r\n                width={WIDTH} \r\n                height={HEIGHT}\r\n                x={x} y={y}\r\n                />\r\n                <Shape\r\n                    sceneFunc={(context, shape) => {\r\n                    context.beginPath();\r\n                    context.moveTo(x, y + HEIGHT/2);\r\n                    context.lineTo(x + WIDTH/4, y);\r\n                    context.lineTo(x + WIDTH - WIDTH/4, y);\r\n                    context.lineTo(x + WIDTH, y + HEIGHT/2);\r\n                    context.lineTo(x + WIDTH - WIDTH/4, y + HEIGHT);\r\n                    context.lineTo(x + WIDTH/4, y + HEIGHT);\r\n                    context.closePath();\r\n                    // (!) Konva specific method, it is very important\r\n                    context.fillStrokeShape(shape);\r\n                    }}\r\n                    fill=\"white\"\r\n                    stroke={actionMenuOption === 9? \"red\" : 'black'}\r\n                    strokeWidth={actionMenuOption === 9? 4 : 2}\r\n                />\r\n            </Group>\r\n            break;\r\n\r\n            \r\n        default:\r\n            break;\r\n    }\r\n\r\n    return (\r\n        <Group \r\n        id={id} \r\n        ref={groupRef}\r\n        onClick={(()=>(DeleteInstruction()))}\r\n        >\r\n            {element}\r\n            <Text ref={textRef} \r\n                text={text}\r\n                x={ x! + (rectRef.current ? rectRef.current.width() / 2 : 0)}\r\n                y={y}\r\n                offsetX={textWidth / 2}\r\n                align=\"center\"\r\n                onDblClick={()=>(Updatetext(textRef.current!,id,model))}\r\n                height={rectRef.current ? (rectRef.current.height()) : 0}\r\n                verticalAlign='middle'\r\n            />\r\n        </Group>\r\n    );\r\n}","import React, { FC, useEffect, useRef, useState } from 'react';\r\nimport { Circle } from 'react-konva';\r\nimport { Circle as _circle } from 'konva/lib/shapes/Circle';\r\nimport { DragonActionInstruction, DragonCommentInstruction, DragonConditionInstruction, DragonModel, DragonOutputInstruction, DragonSleepInstruction } from '../../../dragon/dragon.model/dragon.model';\r\nconst WIDTH = 15;\r\nconst HEIGHT = 15;\r\n\r\ntype IconProps = {\r\n    x: number;\r\n    y: number;\r\n    id: string;\r\n    parent: string;\r\n    next: string | undefined;\r\n    actionMenuOption: number;\r\n    model: DragonModel;\r\n    setModel: (value: DragonModel) => void;\r\n}\r\n\r\n\r\nconst Insert={\r\n    action: 1,\r\n    comment: 2,\r\n    output: 4,\r\n    if: 5,\r\n    sleep: 8,\r\n}\r\n\r\n\r\nexport const Inserter: FC<IconProps> = (props) => {\r\n    const [active, setActive] = useState<boolean>(false);\r\n    const circleRef = useRef<_circle>(null);\r\n\r\n\r\n    useEffect(()=>{\r\n    setActive(props.actionMenuOption !== 0 && props.actionMenuOption !== 9)\r\n    },[props.actionMenuOption])\r\n\r\n    function InsertInstruction(){\r\n        const m = DragonModel.restoreFromJSON(props.model.toJSON());\r\n        switch(props.actionMenuOption){\r\n            case Insert.action:\r\n            {\r\n                const action = new DragonActionInstruction(props.parent);\r\n                action.text = \"action text\";\r\n                m.Insert(action, props.next);\r\n                props.setModel(m);\r\n            }\r\n            break;\r\n            case Insert.comment:\r\n            {\r\n                const comment = new DragonCommentInstruction(props.parent);\r\n                comment.text = \"comment text\";\r\n                m.Insert(comment, props.next);\r\n                props.setModel(m);\r\n            }\r\n            break;\r\n            case Insert.output:\r\n            {\r\n                const comment = new DragonOutputInstruction(props.parent);\r\n                comment.text = \"output text\";\r\n                m.Insert(comment, props.next);\r\n                props.setModel(m);\r\n            }\r\n            break;\r\n            case Insert.if:\r\n            {\r\n                const condition = new DragonConditionInstruction(props.parent);\r\n                condition.text = \"condition\";\r\n                m.Insert(condition, props.next);\r\n                props.setModel(m);\r\n            }\r\n            break;\r\n            case Insert.sleep:\r\n            {\r\n                const sleep = new DragonSleepInstruction(props.parent);\r\n                sleep.text = \"100\";\r\n                m.Insert(sleep, props.next);\r\n                props.setModel(m);\r\n            }\r\n            break;\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n            <Circle ref={circleRef} \r\n            draggable={true}\r\n            visible = {active}\r\n            width={WIDTH}\r\n            onClick={()=>(InsertInstruction())}\r\n            height={HEIGHT}\r\n            x={props.x} y={props.y}\r\n            stroke=\"black\" strokeWidth={1} fill=\"lightgreen\" />\r\n    );\r\n}\r\n\r\n\r\n\r\nexport const BranchDing: FC<IconProps> = (props) => {\r\n\r\n    return (\r\n            <Circle \r\n            draggable={true}\r\n            width={WIDTH}\r\n            height={HEIGHT}\r\n            x={props.x} y={props.y}\r\n            offsetY={-20}\r\n            offsetX={-80}\r\n            />\r\n    );\r\n}\r\n\r\nexport const Limiter: FC<IconProps> = (props) => {\r\n\r\n    return (\r\n            <Circle \r\n            draggable={true}\r\n            width={WIDTH}\r\n            height={HEIGHT}\r\n            x={props.x} y={props.y}\r\n            offsetY={-20}\r\n            offsetX={-80}\r\n            />\r\n    );\r\n}","import React, { FC, useEffect, useRef, useState } from 'react';\r\nimport { Group, Line } from 'react-konva';\r\nimport { Rect as _rect } from 'konva/lib/shapes/Rect';\r\nimport { Text as _text } from 'konva/lib/shapes/Text';\r\nimport { Layer as _layer } from 'konva/lib/Layer';\r\nimport { Group as _group } from 'konva/lib/Group';\r\nimport { Begin } from './Begin';\r\nimport { DragonInstruction, DragonModel, InstructionType } from '../../../dragon/dragon.model/dragon.model';\r\nimport { HEIGHT, WIDTH } from './CONSTRAINTS';\r\nimport { Action } from './Action';\r\nimport { BranchDing, Inserter, Limiter } from './Inserter';\r\n\r\nexport const Shape = {\r\n    BEGIN: \"begin\",\r\n    PRIMITIVE: \"primitive\",\r\n    ACTION: \"action\",\r\n    CONDITION: \"condition\",\r\n    BRANCH: \"branch\",\r\n    LIMITER: 'limiter',\r\n    INPUT: \"input\",\r\n    OUTPUT: \"output\",\r\n    LOOP: \"loop\",\r\n    SWITCH: 'switch',\r\n    COMMENT: 'comment',\r\n    SLEEP: 'sleep',\r\n    END: 'end',\r\n    INSERTER: 'inserter'\r\n} as const\r\n\r\nconst StartPoint = {\r\n    x: 80,\r\n    y: 40\r\n};\r\n\r\nconst HeightOffset = HEIGHT * 2;\r\nconst WidthOffset = WIDTH / 2;\r\n\r\ntype IconProps = {\r\n    model: DragonModel,\r\n    setModel: (value: DragonModel) => void,\r\n    layerRef: React.RefObject<_layer>,\r\n    actionMenuOption: number;\r\n}\r\n\r\ninterface Node {\r\n    id: string;\r\n    previous: Node | undefined;\r\n    parent: string;\r\n    text: string;\r\n    shape: string;\r\n    x: number;\r\n    y: number;\r\n    bOffsetX?: number;\r\n    bOffsetY?: number;\r\n}\r\n\r\nexport const Schema: FC<IconProps> = ({ model, setModel, layerRef, actionMenuOption }) => {\r\n    if (!model) return null;\r\n    // const konvaRefs = new Map<string, React.MutableRefObject<undefined>>();\r\n    const groupRef = useRef<_group>(null)\r\n    const INITIAL_STATE = parseModel(model);\r\n    const [nodes, setNodes] = useState<Array<Node>>(INITIAL_STATE);\r\n\r\n    useEffect(() => {\r\n        setNodes(parseModel(model));\r\n    }, [model])\r\n\r\n\r\n\r\n    function genSelector(icon: DragonInstruction, prev: Node) {\r\n\r\n        return {\r\n            id: \"\",\r\n            previous: prev,\r\n            parent: icon.parent,\r\n            text: icon.id,\r\n            shape: Shape.INSERTER,\r\n            x: prev.x + WIDTH / 2,\r\n            y: prev.y + HEIGHT + HeightOffset / 4,\r\n        };\r\n    }\r\n\r\n    function genSimpleInstruction(icon: DragonInstruction, prev: Node, shape: string) {\r\n        return {\r\n            id: icon.id,\r\n            previous: prev,\r\n            parent: icon.parent,\r\n            text: icon.text,\r\n            shape: shape,\r\n            x: prev.x,\r\n            y: prev.y + HeightOffset,\r\n        }\r\n    }\r\n\r\n\r\n    function getPrevious(icon: DragonInstruction, parent: DragonInstruction | undefined) {\r\n        if (!parent) return undefined;\r\n        const positionInParent = parent.children.findIndex((element) => (element.id === icon.id));\r\n        // If (first) => previous = parent, else if (not first in container) previous = > last in previous macro-icon\r\n        const from = positionInParent === 0 ? icon.parent : parent?.children[positionInParent - 1].id;\r\n        const previous = model.getInstruction(from);\r\n        if (previous) {\r\n            if (previous.type === InstructionType.CONDITION ||\r\n                previous.type === InstructionType.LOOP ||\r\n                previous.type === InstructionType.SWITCH) {\r\n                const deep = model.getDeepestLeftChild(from);\r\n                return deep;\r\n            }\r\n            return previous;\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n\r\n    function parseInstruction(icon: DragonInstruction, temp_nodes: Array<Node>) {\r\n        const parent = model.getInstruction(icon.parent);\r\n        const from = getPrevious(icon, parent);\r\n        const prev = temp_nodes.find((value) => (value.id === from?.id))!;\r\n        switch (icon.type) {\r\n            case InstructionType.SCHEMA:\r\n                break;\r\n\r\n            case InstructionType.PRIMITIVE:\r\n                temp_nodes.push(\r\n                    {\r\n                        id: icon.id,\r\n                        previous: temp_nodes.find(value => (value.id === icon.parent))!,\r\n                        parent: icon.parent,\r\n                        text: icon!.text,\r\n                        shape: Shape.BEGIN,\r\n                        x: StartPoint.x,\r\n                        y: StartPoint.y\r\n                    }\r\n                );\r\n                break;\r\n\r\n            case InstructionType.ACTION:\r\n                temp_nodes.push(genSelector(icon, prev));\r\n                temp_nodes.push(genSimpleInstruction(icon, prev, Shape.ACTION));\r\n                break;\r\n\r\n            case InstructionType.OUTPUT:\r\n                temp_nodes.push(genSelector(icon, prev));\r\n                temp_nodes.push(genSimpleInstruction(icon, prev, Shape.OUTPUT));\r\n                break;\r\n\r\n            case InstructionType.COMMENT:\r\n                temp_nodes.push(genSelector(icon, prev));\r\n                temp_nodes.push(genSimpleInstruction(icon, prev, Shape.COMMENT));\r\n                break;\r\n\r\n            case InstructionType.SLEEP:\r\n                temp_nodes.push(genSelector(icon, prev));\r\n                temp_nodes.push(genSimpleInstruction(icon, prev, Shape.SLEEP));\r\n                break;\r\n\r\n            case InstructionType.CONDITION:\r\n                temp_nodes.push(genSelector(icon, prev));\r\n                temp_nodes.push(genSimpleInstruction(icon, prev, Shape.CONDITION));\r\n                break;\r\n\r\n            case InstructionType.BRANCH:\r\n                {\r\n                    const parent_node = temp_nodes.find(value => value.id === parent?.id)!;\r\n                    const branchOffset = parent?.children.findIndex(value => (value.id === icon.id));\r\n                    const altbranchOffset = branchOffset === 0 ? 0 : WidthOffset;\r\n                    const { x, y } = { x: parent_node.x + WIDTH * branchOffset! + altbranchOffset, y: parent_node.y };\r\n                    temp_nodes.push(\r\n                        {\r\n                            id: icon.id,\r\n                            previous: temp_nodes.find(value => value.id === icon.parent)!,\r\n                            parent: icon.parent,\r\n                            text: '',\r\n                            shape: Shape.BRANCH,\r\n                            x: x,\r\n                            y: y,\r\n                        }\r\n                    );\r\n                    temp_nodes.push(\r\n                        {\r\n                            id: \"\",\r\n                            previous: undefined,\r\n                            parent: icon.id,\r\n                            text: icon.id,\r\n                            shape: Shape.INSERTER,\r\n                            x: x + WIDTH / 2,\r\n                            y: y + HeightOffset / 16 + HEIGHT,\r\n                        }\r\n                    )\r\n                }\r\n                break;\r\n            case InstructionType.LIMITER:\r\n                {\r\n                    const condition = model.getInstruction(icon.parent)!;\r\n                    const left = model.getDeepestLeftChild(condition.children[0]!.id);\r\n                    const right = model.getDeepestLeftChild(condition.children[1]!.id);\r\n                    const left_node = temp_nodes.find(value => value.id === left!.id)!;\r\n                    const right_node = temp_nodes.find(value => value.id === right!.id)!;\r\n                    const { x, y } = { x: left_node.x, y: left_node.y }\r\n                    temp_nodes.push(\r\n                        {\r\n                            id: icon.id,\r\n                            previous: temp_nodes.find(value => value.id === right_node.id)!,\r\n                            parent: icon.parent,\r\n                            text: '',\r\n                            shape: Shape.BRANCH,\r\n                            x: x,\r\n                            y: y + HeightOffset/2\r\n                        }\r\n                    );\r\n                    temp_nodes.push(\r\n                        {\r\n                            id: icon.id,\r\n                            previous: temp_nodes.find(value => value.id === left_node.id)!,\r\n                            parent: icon.parent,\r\n                            text: '',\r\n                            shape: Shape.BRANCH,\r\n                            x: x,\r\n                            y: y + HeightOffset/2\r\n                        }\r\n                    );\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        icon.children.forEach((value) => {\r\n            parseInstruction(value, temp_nodes);\r\n        })\r\n\r\n    }\r\n\r\n\r\n\r\n    function parseModel(model: DragonModel) {\r\n        const temp_nodes: Array<Node> = [];\r\n        parseInstruction(model.getInstruction(model.head)!, temp_nodes);\r\n        // ссылка не предыдущую от end выбирается неккоректно, если последняя икона - макро! Исправить на поиск последней в глубину\r\n        const end = {\r\n            id: 'end',\r\n            previous: temp_nodes[temp_nodes.length - 1],\r\n            parent: '',\r\n            text: \"Конец\",\r\n            shape: Shape.END,\r\n            x: temp_nodes[temp_nodes.length - 1].x,\r\n            y: temp_nodes[temp_nodes.length - 1].y + HeightOffset\r\n        }\r\n        temp_nodes.push(end);\r\n        temp_nodes.push(\r\n            {\r\n                id: \"\",\r\n                previous: end.previous,\r\n                parent: model.getInstruction(model.head)!.children[0].id,\r\n                text: \"\",\r\n                shape: Shape.INSERTER,\r\n                x: end.x + WIDTH / 2,\r\n                y: end.y - HeightOffset / 4,\r\n            }\r\n        );\r\n        return temp_nodes;\r\n\r\n    }\r\n\r\n    return (\r\n        <Group ref={groupRef}>\r\n            {\r\n                nodes.map((value, key) => {\r\n                    switch (value.shape) {\r\n                        case Shape.ACTION:\r\n                        case Shape.OUTPUT:\r\n                        case Shape.COMMENT:\r\n                        case Shape.END:\r\n                        case Shape.LIMITER:\r\n                        case Shape.SLEEP:\r\n                        case Shape.CONDITION:\r\n                            return <Line\r\n                                stroke={'black'}\r\n                                strokeWidth={1}\r\n                                points={[value.x + WIDTH / 2, value.y, value.previous!.x + WIDTH / 2, value.previous!.y + HEIGHT / 2]}\r\n                            />\r\n                        case Shape.BRANCH:\r\n                            {\r\n                                const val: { x: number, y: number } = value;\r\n                                const prev: { x: number, y: number } = value.previous!;\r\n                                if (val.y <= prev.y) {\r\n                                    return <Line\r\n                                        stroke={'black'}\r\n                                        strokeWidth={1}\r\n                                        points={[value.x + WIDTH / 2, value.y + HEIGHT / 2, value.previous!.x + WIDTH / 2, value.previous!.y + HEIGHT / 2]}\r\n                                    />\r\n                                } else {\r\n                                    return <Group>\r\n                                        <Line\r\n                                            stroke={'black'}\r\n                                            strokeWidth={1}\r\n                                            points={[val.x + WIDTH / 2, val.y + HEIGHT / 2, prev.x + WIDTH / 2, val.y + HEIGHT / 2]}\r\n                                        />\r\n                                        <Line\r\n                                            stroke={'black'}\r\n                                            strokeWidth={1}\r\n                                            points={[prev.x + WIDTH / 2, val.y + HEIGHT / 2, prev.x + WIDTH / 2, prev.y + HEIGHT / 2]}\r\n                                        />\r\n                                    </Group>\r\n\r\n                                }\r\n                            }\r\n                    }\r\n                })\r\n            }\r\n            {\r\n                nodes.map((value, key) => {\r\n                    switch (value.shape) {\r\n                        case Shape.BEGIN:\r\n                            return <Begin model={model} key={key} id={value.id} x={value.x} y={value.y} text={value.text} />\r\n                        case Shape.END:\r\n                            return <Begin model={model} key={key} id={value.id} x={value.x} y={value.y} text={value.text} />\r\n                        case Shape.COMMENT:\r\n                        case Shape.ACTION:\r\n                        case Shape.OUTPUT:\r\n                        case Shape.SLEEP:\r\n                        case Shape.CONDITION:\r\n                            return <Action type={value.shape} setModel={setModel} model={model} key={key} id={value.id} parent={value.parent} x={value.x} y={value.y} text={value.text} actionMenuOption={actionMenuOption} />\r\n\r\n                        case Shape.INSERTER:\r\n                            return <Inserter setModel={setModel} model={model} key={key} id={value.id} x={value.x} y={value.y} parent={value.parent} next={value.text} actionMenuOption={actionMenuOption} />\r\n                        case Shape.BRANCH:\r\n                            return <BranchDing setModel={setModel} model={model} key={key} id={value.id} x={value.x} y={value.y} parent={value.parent} next={value.text} actionMenuOption={actionMenuOption} />\r\n                        case Shape.LIMITER:\r\n                            return <Limiter setModel={setModel} model={model} key={key} id={value.id} x={value.x} y={value.y} parent={value.parent} next={value.text} actionMenuOption={actionMenuOption} />\r\n                    }\r\n                })\r\n            }\r\n\r\n        </Group>\r\n    );\r\n}","import React, { useEffect, useRef } from 'react';\r\nimport { Layer, Stage, Rect } from 'react-konva';\r\nimport { Layer as _layer } from 'konva/lib/Layer';\r\nimport { Stage as _stage } from 'konva/lib/Stage';\r\nimport { Rect as _rect } from 'konva/lib/shapes/Rect';\r\nimport useImage from 'use-image';\r\nimport { DragonModel } from '../../../dragon/dragon.model/dragon.model';\r\nimport { Schema } from '../Shapes/Schema';\r\n\r\ntype Props = {\r\n    width: number;\r\n    height: number;\r\n    model: DragonModel;\r\n    setModel: (value: DragonModel) => void;\r\n    actionMenuOption: number;\r\n}\r\n\r\n\r\nfunction getCenter(node: any) {\r\n    return {\r\n        x: node.x() + node.width() / 2,\r\n        y: node.y() + node.height() / 2\r\n    }\r\n}\r\n\r\nfunction getAngle(object1: any, object2: any) {\r\n    const c1 = getCenter(object1);\r\n    const c2 = getCenter(object2);\r\n\r\n    const dx = c1.x - c2.x;\r\n    const dy = c1.y - c2.y;\r\n    const angle = Math.atan2(-dy, dx);\r\n}\r\n\r\nfunction getRectangleBorderPoint(radians: any, size: any, sideOffset = 0) {\r\n    const width = size.width + sideOffset * 2;\r\n\r\n    const height = size.height + sideOffset * 2;\r\n\r\n    radians %= 2 * Math.PI;\r\n    if (radians < 0) {\r\n        radians += Math.PI * 2;\r\n    }\r\n\r\n    const phi = Math.atan(height / width);\r\n\r\n    let x = 0;\r\n    let y = 0;\r\n    if (\r\n        (radians >= 2 * Math.PI - phi && radians <= 2 * Math.PI) ||\r\n        (radians >= 0 && radians <= phi)\r\n    ) {\r\n        x = width / 2;\r\n        y = Math.tan(radians) * x;\r\n    } else if (radians >= phi && radians <= Math.PI - phi) {\r\n        y = height / 2;\r\n        x = y / Math.tan(radians);\r\n    } else if (radians >= Math.PI - phi && radians <= Math.PI + phi) {\r\n        x = -width / 2;\r\n        y = Math.tan(radians) * x;\r\n    } else if (radians >= Math.PI + phi && radians <= 2 * Math.PI - phi) {\r\n        y = -height / 2;\r\n        x = y / Math.tan(radians);\r\n    }\r\n\r\n    return {\r\n        x: -Math.round(x),\r\n        y: Math.round(y)\r\n    };\r\n}\r\n\r\nfunction getPoints(r1: any, r2: any) {\r\n    const c1 = getCenter(r1);\r\n    const c2 = getCenter(r2);\r\n\r\n    const dx = c1.x - c2.x;\r\n    const dy = c1.y - c2.y;\r\n    const angle = Math.atan2(-dy, dx);\r\n\r\n    const startOffset = getRectangleBorderPoint(angle + Math.PI, r1.size());\r\n    const endOffset = getRectangleBorderPoint(angle, r2.size());\r\n\r\n    const start = {\r\n        x: c1.x - startOffset.x,\r\n        y: c1.y - startOffset.y\r\n    };\r\n\r\n    const end = {\r\n        x: c2.x - endOffset.x,\r\n        y: c2.y - endOffset.y\r\n    };\r\n\r\n    return [start.x, start.y, end.x, end.y]\r\n}\r\n\r\nfunction updateLine(rect1: any, rect2: any, line: any) {\r\n    const points = getPoints(rect1, rect2);\r\n    line.points(points);\r\n}\r\n\r\nexport const KonvaCanvas: React.FC<Props> = ({ width, height, model, setModel, actionMenuOption }) => {\r\n    const [grid] = useImage(\"./grid.gif\");\r\n    const groupRef = useRef<_layer>(null)\r\n    const stageRef = useRef<_stage>(null);\r\n    const backgroundRef = useRef<_rect>(null);\r\n\r\n    useEffect(()=>{\r\n        if (stageRef.current)\r\n        stageRef.current!.on('dragmove', ()=>{\r\n            if (backgroundRef.current) {\r\n                backgroundRef.current.absolutePosition({x:0, y: 0});\r\n            }\r\n        })\r\n    })\r\n\r\n    return (\r\n        <Stage ref={stageRef} draggable width={width} height={800}>\r\n            <Layer draggable ref={groupRef}>\r\n                <Rect ref={backgroundRef} width={width} height={height} fillPatternImage={grid} stroke=\"grey\"></Rect>\r\n                <Schema model={model} setModel={setModel} layerRef={groupRef} actionMenuOption={actionMenuOption} />\r\n            </Layer>\r\n        </Stage>\r\n    )\r\n}","import FileSaver from 'file-saver';\r\nimport React, {KeyboardEvent, KeyboardEventHandler, useEffect, useState} from 'react';\r\nimport { Card, Button, Modal, Form, FormControl } from 'react-bootstrap';\r\nimport { updateTaggedTemplate } from 'typescript';\r\nimport { DragonModel } from '../../../dragon/dragon.model/dragon.model';\r\nimport { SchemaDTO, SchemaService } from '../../../services/SchemaService';\r\nimport Delete from '@material-ui/icons/Delete';\r\nimport CodeIcon from '@material-ui/icons/Code';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport { UserService } from '../../../services/UserService';\r\n\r\ntype Props = {\r\n    schema : SchemaDTO | undefined,\r\n    model : DragonModel | undefined,\r\n    setSchema: (value: SchemaDTO | undefined) => void,\r\n    schemaService: SchemaService\r\n    userService: UserService\r\n}\r\n\r\n\r\nexport const SchemaControl: React.FC<Props> = ({schema, setSchema, model, schemaService, userService}) => {\r\n    const [translatedSchema, setTranslatedSchema] = useState<string>(\"\"); \r\n    const [schemaName, setSchemaName] = useState<string>(schema? schema.name : '');\r\n    const [username, setUsername] = useState<string>('');\r\n\r\n    function handleSaveAsJavascript() {\r\n        if (model && schema) {\r\n            const blob = new Blob([model.toJavaScript()],{type: \"application/javascript\" });\r\n            FileSaver.saveAs(blob, `${schema.name}.js`);\r\n        } else {\r\n            console.log('No schema selected')\r\n        }\r\n    }\r\n    useEffect(()=>{\r\n        if(schema) {\r\n            setSchemaName(schema.name)\r\n            if (schema.last_changed_by_id)\r\n                userService.getUserinfoById(schema.last_changed_by_id).then(user=> setUsername(user.username))\r\n        }\r\n    },[schema])\r\n\r\n    useEffect(()=>{\r\n        if(schema) {\r\n            schema.name = schemaName;\r\n            schemaService.updateSchema(schema);\r\n        }\r\n    },[schemaName])\r\n\r\n    function handleTranslationToTextbox() {\r\n        if (model) {\r\n            setTranslatedSchema(model.toJavaScript());\r\n        } else {\r\n            console.log('No schema selected')\r\n        }\r\n    }\r\n\r\n    function DeleteSelectedSchema() {\r\n        if (schema) {\r\n            schemaService.deleteSchema(schema.uuid);\r\n            setSchema(undefined);\r\n        }\r\n    }\r\n\r\n    function UpdateSchema(){\r\n        if (schema && model) {\r\n            const updated = schema;\r\n            updated.data = model.toJSON();\r\n            schemaService.updateSchema(updated).then(response=>{\r\n                setSchema(response);\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <Card>\r\n            <div hidden ={schema === undefined}>\r\n            <Card.Header>Время изменения: {schema?.last_changed?  schema?.last_changed.replace('T', \" \") : \" \"}</Card.Header>\r\n            <Card.Header>Последнее изменение: {schema ? username : \"\"}</Card.Header>\r\n            </div>\r\n            <Card.Body>\r\n                <Form.Group>\r\n                    <Form.Control\r\n                            type=\"text\"\r\n                            value={schemaName}\r\n                            onChange={(e)=>(setSchemaName(e.target.value))}\r\n                            />\r\n                </Form.Group>\r\n                <Button variant=\"primary btn-block\" disabled={schema === undefined ? true : false} onClick={() => (UpdateSchema())}><SaveIcon/>Сохранить изменения</Button>{' '}\r\n                <Button variant=\"info btn-block\" disabled={schema === undefined ? true : false} onClick={() => { handleTranslationToTextbox(); }}><CodeIcon/>В JavaScript...</Button>{' '}\r\n                <Button variant=\"primary btn-block\" disabled={schema === undefined ? true : false} onClick={() => { handleSaveAsJavascript(); }}><GetAppIcon/>Скачать код</Button>{' '}\r\n            </Card.Body>\r\n            <Form.Group>\r\n                <Form.Label>Схема в Javascript</Form.Label>\r\n                <Form.Control as=\"textarea\" rows={schema == undefined ? 20 : 15} readOnly={true} value={translatedSchema}/>\r\n                <Button variant=\"danger btn-block\" disabled={schema === undefined ? true : false} onClick={() => (DeleteSelectedSchema())}><Delete/>Удалить схему</Button>{' '}\r\n            </Form.Group>\r\n        </Card>\r\n    )\r\n}","import React, { FC, useContext, useEffect, useState } from 'react';\r\nimport { Button, ListGroup } from 'react-bootstrap';\r\nimport { UserContext } from '../../../context/user.provider';\r\nimport { AuthStateService } from '../../../services/AuthStateService';\r\nimport { SchemaService, SchemaDTO } from '../../../services/SchemaService';\r\nimport CreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\r\nimport { UserDTO } from '../../../DTO/UserDTO';\r\n\r\ntype Props = {\r\n    schemaService: SchemaService,\r\n    setSchema: (value: SchemaDTO) => void;\r\n    schema: SchemaDTO | undefined;\r\n    student: UserDTO | undefined;\r\n}\r\n\r\nexport const ProjectTreeCurator: FC<Props> = ({ schemaService, setSchema, schema, student}) => {\r\n    const [schemas, setSchemas] = useState<SchemaDTO[]>([]);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (student)\r\n        schemaService.getUserSchemas(student.uuid)\r\n            .then(schemas => setSchemas(schemas))\r\n            .catch(_err => console.log(_err))\r\n    }, [schema, student]);\r\n\r\n    return (\r\n        <ListGroup>\r\n            {schemas.map((scheme) => (\r\n                <ListGroup.Item\r\n                    key={scheme.uuid}\r\n                    action variant={scheme.uuid === schema?.uuid ? `info` : ''}\r\n                    onClick={() => setSchema(scheme)}>\r\n                    {scheme.name}\r\n                </ListGroup.Item>\r\n            ))}\r\n        </ListGroup>\r\n    )\r\n}","import axios from 'axios';\r\nimport { UserDTO } from '../DTO/UserDTO';\r\nimport { AuthStateService } from './AuthStateService';\r\n\r\nconst BASE_API_PREFIX = \"/api/users\";\r\n\r\nexport class UserService {\r\n    private static _instance: UserService;\r\n    private static _authService: AuthStateService;\r\n\r\n    constructor(authService: AuthStateService) {\r\n        UserService._authService = authService.getInstance();\r\n    }\r\n\r\n    public getInstance(): UserService {\r\n        if (!UserService._instance) {\r\n            UserService._instance = new UserService(UserService._authService);\r\n        }\r\n        return UserService._instance;\r\n    }\r\n\r\n\r\n    private setTokenBearer() {\r\n        return {\r\n            \"Authorization\": `Bearer ${UserService._authService.getToken()}`\r\n        }\r\n    }\r\n    public getUserinfoById(uuid: string): Promise<UserDTO> {\r\n        return axios.get(`${BASE_API_PREFIX}/${uuid}`, {\r\n            headers: this.setTokenBearer()\r\n        })\r\n            .then(response => response.data)\r\n            .catch(() => { throw new Error(\"Unable to get data\") }\r\n            )\r\n    }\r\n\r\n    public GetUnprevilegedUsers(): Promise<UserDTO[]> {\r\n        return axios.get(`${BASE_API_PREFIX}/nonpriveleged`, {\r\n            headers: this.setTokenBearer()\r\n        })\r\n            .then(response => response.data);\r\n    }\r\n\r\n\r\n    public GetAllUsers(): Promise<UserDTO[]> {\r\n        return axios.get(`${BASE_API_PREFIX}`, {\r\n            headers: this.setTokenBearer()\r\n        })\r\n            .then(response => response.data);\r\n    }\r\n\r\n    public async UpdateData(user: UserDTO) {\r\n\r\n        return axios.put(BASE_API_PREFIX + \"/update\", user, {\r\n            headers: {\r\n                \"Authorization\": `Bearer ${UserService._authService.getToken()}`,\r\n            }\r\n        })\r\n            .then(response => {\r\n                UserService._authService.setUsername(user.username);\r\n                UserService._authService.setRole(user.role);\r\n                return response.data\r\n            });\r\n    }\r\n\r\n    public async UpdateUserRole(user: UserDTO) {\r\n\r\n        return axios.put(BASE_API_PREFIX + \"/update\", user, {\r\n            headers: {\r\n                \"Authorization\": `Bearer ${UserService._authService.getToken()}`,\r\n            }\r\n        })\r\n            .then(response => {\r\n                return response.data\r\n            });\r\n    }\r\n\r\n    public async RenameUser(newname: string) {\r\n        this.UpdateData({\r\n            username: newname,\r\n            role: UserService._authService.getRole(),\r\n            uuid: UserService._authService.getUUID(),\r\n            email: UserService._authService.getEmail(),\r\n        });\r\n    }\r\n}\r\n\r\ntype ResponsePayload = {\r\n    status: number;\r\n    statusText: string;\r\n};\r\n","import axios from 'axios';\r\nimport { CreateRelationDTO } from '../DTO/CreateRelationDTO';\r\nimport { RelationDTO } from '../DTO/relationDTO';\r\nimport { AuthStateService } from './AuthStateService';\r\n\r\nconst BASE_API_PREFIX = \"/api/curators\";\r\n\r\nexport class CuratorService {\r\n    private static _instance: CuratorService;\r\n    private static _authService : AuthStateService;\r\n\r\n    constructor(authService : AuthStateService){\r\n        CuratorService._authService = authService.getInstance();\r\n    }\r\n\r\n    public getInstance(): CuratorService {\r\n        if (!CuratorService._instance){\r\n            CuratorService._instance = new CuratorService(CuratorService._authService);\r\n        }\r\n        return CuratorService._instance;\r\n    }\r\n\r\n    public createRelation(relation : CreateRelationDTO) {\r\n        return axios.post<RelationDTO>(BASE_API_PREFIX+'/create',relation).then(response => \r\n            response.data);\r\n    }\r\n\r\n    public DeleteRelation(id: number) {\r\n        return axios.delete(BASE_API_PREFIX+'/' + id).then(response => \r\n            response.data);\r\n    }\r\n\r\n    public getRelationsByCurator(curator: string) {\r\n        return axios.get<RelationDTO[]>(BASE_API_PREFIX+'/relations/'+curator).then(response => \r\n            response.data);\r\n    }\r\n\r\n    public updateRelation(relation: RelationDTO) {\r\n        return axios.put<RelationDTO>(BASE_API_PREFIX, relation).then(response => \r\n            response.data);\r\n    }\r\n\r\n}","import React from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { Card } from 'react-bootstrap';\r\nimport Select from 'react-dropdown-select';\r\nimport { UserDTO } from '../../../DTO/UserDTO';\r\nimport { UserService } from '../../../services/UserService';\r\nimport { AuthStateService } from '../../../services/AuthStateService';\r\nimport { CuratorService } from '../../../services/CuratorService';\r\n\r\n\r\ntype Props = {\r\n    selectUser: (value: UserDTO) => void;\r\n}\r\n\r\nconst authService = new AuthStateService().getInstance();\r\nconst userService = new UserService(authService);\r\nconst curatorService = new CuratorService(authService);\r\n\r\nexport const StudentsSelector: React.FC<Props> = ({ selectUser }) => {\r\n    const [users, setUsers] = useState<UserDTO[]>(FetchStudents());\r\n\r\n    function FetchStudents() {\r\n        const temp_users: UserDTO[] = [];\r\n        curatorService.getRelationsByCurator(authService.getUUID())\r\n            .then(relations => {\r\n                relations.forEach(value => {\r\n                    userService.getUserinfoById(value.uuid_user)\r\n                        .then(user => {\r\n                            temp_users.push(user);\r\n                        });\r\n                });\r\n            });\r\n        return temp_users;\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        setUsers(FetchStudents());\r\n    }, [])\r\n\r\n\r\n    function setUser(values: UserDTO[]) {\r\n        if (values.length) {\r\n            selectUser(values[0]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card >\r\n            <Select\r\n                options={users}\r\n                multi={false}\r\n                searchBy={'username'}\r\n                labelField={\"username\"}\r\n                valueField={\"uuid\"}\r\n                placeholder={\"Начните вводить имя\"}\r\n                values={[]}\r\n                onChange={(value) => setUser(value)}\r\n            />\r\n        </Card>\r\n    )\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Card, Col, Container, OverlayTrigger, Row, Tooltip } from 'react-bootstrap';\r\nimport { AuthStateService } from '../../services/AuthStateService';\r\nimport { SchemaDTO, SchemaService } from '../../services/SchemaService';\r\nimport { ActionMenu } from './ActionMenu/ActionMenu';\r\nimport { ProjectTree } from './ProjectTree/ProjectTree';\r\nimport './Editor.scss'\r\nimport { KonvaCanvas } from './KonvaCanvas/KonvaCanvas';\r\nimport ContainerDimensions from 'react-container-dimensions';\r\nimport { SchemaControl } from './Components/SchemaControl';\r\nimport { DragonModel } from '../../dragon/dragon.model/dragon.model';\r\nimport { ProjectTreeCurator } from './Components/ProjectTreeCurator';\r\nimport { StudentsSelector } from './Components/StudentsSelector';\r\nimport { UserDTO } from '../../DTO/UserDTO';\r\nimport { UserService } from '../../services/UserService';\r\n\r\n\r\nconst authService: AuthStateService = new AuthStateService().getInstance();\r\nconst schemaService: SchemaService = new SchemaService(authService).getInstance();\r\nconst userService: UserService= new UserService(authService).getInstance();\r\n\r\nexport const EditorPage: React.FC = () => {\r\n    const [schema, setSchema] = useState<SchemaDTO>();\r\n    const [model, setModel] = useState<DragonModel>(new DragonModel());\r\n    const [actionMenuOption, setActionMenuOption] = useState<number>(0);\r\n    const [user, selectUser] = useState<UserDTO>()\r\n\r\n    useEffect(() => {\r\n        if (schema) {\r\n            setModel(DragonModel.restoreFromJSON(schema?.data));\r\n        }\r\n    }, [schema])\r\n\r\n    /* eslint-disable  @typescript-eslint/no-explicit-any */\r\n    const renderTooltip = (props: any) => (\r\n        <Tooltip id=\"button-tooltip\" {...props}>\r\n            Выберите схему\r\n        </Tooltip>\r\n    );\r\n\r\n    useEffect(() => {\r\n        document.title = schema === undefined ? \"DRAKON IDE\" : schema.name;\r\n    }, [schema]);\r\n    return (\r\n\r\n        <Container fluid id=\"main-wrap\">\r\n            <Row>\r\n                <Col xs={2}>\r\n                    <OverlayTrigger\r\n                        placement=\"right\"\r\n                        delay={{ show: 250, hide: 400 }}\r\n                        overlay={renderTooltip}\r\n                    >\r\n                        <Card >\r\n                            <Card.Header>Схемы пользователя: {authService.getUsername()}</Card.Header>\r\n                            <Card.Body>\r\n                                <ProjectTree schemaService={schemaService} setSchema={setSchema} schema={schema} />\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </OverlayTrigger>\r\n                    <Card hidden={authService.getRole() === \"USER\"}>\r\n                        <Card.Body>\r\n                            <StudentsSelector selectUser={selectUser} />\r\n                            <ProjectTreeCurator student={user} schemaService={schemaService} setSchema={setSchema} schema={schema} />\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                <Col xs={1}>\r\n                    <ActionMenu setActionMenuOption={setActionMenuOption} />\r\n                </Col>\r\n                <Col xs={7}>\r\n                    <ContainerDimensions>\r\n                        {({ height, width }) => <KonvaCanvas height={height} width={width} setModel={setModel} model={model} actionMenuOption={actionMenuOption} />}\r\n                    </ContainerDimensions>\r\n                </Col>\r\n                <Col xs={2}>\r\n                    <SchemaControl userService={userService} schemaService={schemaService} setSchema={setSchema} schema={schema} model={model} />\r\n                </Col>\r\n            </Row>\r\n            <Row className=\"footer\">\r\n\r\n            </Row>\r\n        </Container>\r\n    );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Alert } from 'react-bootstrap';\r\nimport './Login.scss';\r\nimport { AuthStateService } from '../../services/AuthStateService';\r\nimport { UserAction } from '../../context/user.provider';\r\nimport { Avatar, Button, Container, CssBaseline, makeStyles, TextField, Typography, IconButton } from '@material-ui/core';\r\nimport { Visibility, VisibilityOff } from '@material-ui/icons';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockTwoTone';\r\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\r\n\r\n\r\nconst greet = \"DRAKON IDE\";\r\nconst authStateService = new AuthStateService().getInstance();\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: '100vh',\r\n    },\r\n    image: {\r\n        backgroundImage: 'url(https://source.unsplash.com/1600x900/?dragon)',\r\n        backgroundRepeat: 'no-repeat',\r\n        backgroundColor:\r\n            theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\r\n        backgroundSize: 'cover',\r\n        backgroundPosition: 'center',\r\n    },\r\n    paper: {\r\n        margin: theme.spacing(16, 4),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.primary.light,\r\n    },\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n        backgroundColor: theme.palette.primary.light\r\n    },\r\n}));\r\n\r\ntype Props = {\r\n    setRegisterData: React.Dispatch<UserAction>;\r\n}\r\n\r\ninterface State {\r\n    username: string;\r\n    email: string\r\n    password: string;\r\n    repeatPassword: string;\r\n    showPassword: boolean;\r\n    registrationForm: boolean\r\n}\r\n\r\nexport const Login: React.FC<Props> = ({ setRegisterData }) => {\r\n    const [values, setValues] = React.useState<State>({\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        repeatPassword: '',\r\n        showPassword: false,\r\n        registrationForm: false,\r\n    });\r\n    const [errorHidden, setErrorHidden] = useState(true);\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n    const classes = useStyles();\r\n\r\n\r\n    const togglePasswordVisiblity = () => {\r\n        setValues({ ...values, showPassword: !values.showPassword });\r\n    };\r\n\r\n\r\n    function handleAuthentificationButton(e?: React.MouseEvent<HTMLElement, globalThis.MouseEvent>) {\r\n        e?.preventDefault();\r\n        if (values.registrationForm) {\r\n            if (values.password === values.repeatPassword) {\r\n                return handleSignupSubmit();\r\n            } else {\r\n                setErrorMessage(\"Пароли не совпадают\")\r\n                setErrorHidden(false);\r\n            }\r\n        } else {\r\n            return handleLoginSubmit()\r\n        }\r\n    }\r\n\r\n    const handleLoginSubmit = async () => {\r\n        const response = await authStateService.Authentificate(values.username, values.password);\r\n        if (response.status === 200 && response.body) {\r\n            console.log(response.body)\r\n            setRegisterData({\r\n                type: \"LOGIN\",\r\n                payload: response.body\r\n            });\r\n        }\r\n        else {\r\n            if (response.statusText) {\r\n                setErrorMessage(response.statusText.replace(\"QueryFailedError:\", ''));\r\n            } else {\r\n                setErrorMessage(\"Нет ответа от сервера\")\r\n            }\r\n            setErrorHidden(false);\r\n        }\r\n    }\r\n\r\n    const handleSignupSubmit = async () => {\r\n        const response = await authStateService.RegisterUser(values.username, values.password, values.email);\r\n        if (response.status === 201 && response.body) {\r\n            setRegisterData({\r\n                type: \"LOGIN\",\r\n                payload: response.body\r\n            });\r\n        }\r\n        else {\r\n            if (response.statusText) {\r\n                setErrorMessage(response.statusText);\r\n            } else {\r\n                setErrorMessage(\"Нет ответа от сервера\")\r\n            }\r\n            setErrorHidden(false);\r\n        }\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        document.title = \"Вход и регистрация\"\r\n    }, []);\r\n\r\n    const handleMouseDownPassword = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Container component=\"main\" maxWidth=\"xs\">\r\n                <CssBaseline />\r\n                <div className={classes.paper}>\r\n                    <Typography component=\"h1\" variant=\"h4\">\r\n                        {greet}\r\n                    </Typography>\r\n                    <Avatar className={classes.avatar}>\r\n                        {values.registrationForm ? <VpnKeyIcon /> : <LockOutlinedIcon />}\r\n                    </Avatar>\r\n                    <Typography component=\"h1\" variant=\"h5\">\r\n                        {values.registrationForm ? \"Регистрация\" : \"Вход\"}\r\n                    </Typography>\r\n                    <form className={classes.form} noValidate>\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            margin=\"normal\"\r\n                            required\r\n                            fullWidth\r\n                            id=\"username\"\r\n                            label=\"Логин\"\r\n                            name=\"username\"\r\n                            autoComplete=\"username\"\r\n                            autoFocus\r\n                            onChange={e => {\r\n                                setValues({ ...values, username: e.target.value });\r\n                            }}\r\n                        />\r\n                        <TextField\r\n                            hidden={!values.registrationForm}\r\n                            variant=\"outlined\"\r\n                            required\r\n                            fullWidth\r\n                            id=\"email\"\r\n                            label=\"E-mail\"\r\n                            name=\"email\"\r\n                            autoComplete=\"email\"\r\n                            autoFocus\r\n                            onChange={e => {\r\n                                setValues({ ...values, email: e.target.value });\r\n                            }}\r\n                        />\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            margin=\"normal\"\r\n                            required\r\n                            fullWidth\r\n                            name=\"password\"\r\n                            label=\"Пароль\"\r\n                            id=\"password\"\r\n                            type={values.showPassword ? 'text' : 'password'}\r\n                            autoComplete=\"current-password\"\r\n                            onChange={e => {\r\n                                setValues({ ...values, password: e.target.value });\r\n                            }}\r\n                        />\r\n                        <TextField\r\n                            hidden={!values.registrationForm}\r\n                            variant=\"outlined\"\r\n                            required\r\n                            fullWidth\r\n                            name=\"password\"\r\n                            label=\"Повторите пароль\"\r\n                            id=\"repeat-password\"\r\n                            type={values.showPassword ? 'text' : 'password'}\r\n                            autoComplete=\"current-password\"\r\n                            onChange={e => {\r\n                                setValues({ ...values, repeatPassword: e.target.value });\r\n                            }}\r\n                        />\r\n                        <IconButton\r\n                            aria-label=\"toggle password visibility\"\r\n                            onClick={togglePasswordVisiblity}\r\n                            onMouseDown={handleMouseDownPassword}\r\n                            edge=\"end\"\r\n                        >\r\n                            {values.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                        </IconButton>\r\n                        <Alert hidden={errorHidden} variant=\"danger\">{errorMessage}</Alert>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            className={classes.submit}\r\n                            onClick={(e) => { handleAuthentificationButton(e); }}\r\n                        >\r\n                            {values.registrationForm ? \"Регистрация\" : \"Вход\"}\r\n                        </Button>\r\n                        <Button\r\n                            variant=\"text\"\r\n                            fullWidth\r\n                            onClick={e => {\r\n                                setValues({ ...values, registrationForm: !values.registrationForm });\r\n                            }}\r\n                        >\r\n                            {values.registrationForm ? \"Есть аккаунт? Войти\" : \"Нет аккаунта? Зарегистрироваться\"}\r\n                        </Button>\r\n                    </form>\r\n                </div>\r\n            </Container>\r\n        </div >);\r\n};\r\n\r\nexport default Login;","import React, { FC } from 'react';\r\nimport { Alert } from 'react-bootstrap';\r\n\r\n\r\n\r\nexport const NotFoundPage : FC = () => {\r\n    return (\r\n        <Alert variant=\"danger\" dismissible>\r\n        <Alert.Heading>Error 404: Not Found!</Alert.Heading>\r\n        <p>\r\n          Это не та страница, которую ты ищешь!\r\n        </p>\r\n      </Alert>\r\n    )\r\n}","import React, {useContext} from 'react';\r\nimport { Button } from 'react-bootstrap';\r\nimport { UserContext } from '../context/user.provider';\r\n\r\n\r\n\r\n\r\nexport const LogoutButton : React.FC = () => {\r\n    const {dispatch} = useContext(UserContext);\r\n\r\n\r\n    function handleLogout(e: React.MouseEvent<HTMLElement, MouseEvent>) {\r\n        e.preventDefault();\r\n        dispatch({\r\n            type: \"LOGOUT\",\r\n            payload: {\r\n                access_token: undefined,\r\n                role : undefined,\r\n                username: undefined,\r\n                uuid: undefined,\r\n                email: undefined,\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Button variant=\"outline-info btn-block mt-1\" onClick={(e) => { handleLogout(e)} }>Выйти</Button>{' '}\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n","import React, { useContext, useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { Navbar, Nav, Form } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { UserContext } from '../context/user.provider';\r\nimport { LogoutButton } from './LogoutButton';\r\n\r\n\r\n\r\nexport const NavigationFooter: React.FC = () => {\r\n    const { state } = useContext(UserContext)\r\n    const [role, setRole] = useState('');\r\n\r\n    useEffect(() => {\r\n        let name = \"Пользователь\";\r\n        switch (state.role) {\r\n            case \"CURATOR\":\r\n                name = \"Куратор\";\r\n                break;\r\n            case \"ADMIN\":\r\n                name = \"Администратор\";\r\n                break;\r\n        }\r\n        setRole(name);\r\n    }, [state])\r\n\r\n    return (\r\n        <Navbar fixed=\"bottom\" bg=\"dark\" variant=\"dark\" expand=\"lg\">\r\n            <Navbar.Brand href=\"/\">DRAKON IDE</Navbar.Brand>\r\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n            <Navbar.Collapse id=\"basic-navbar-nav\">\r\n                <Nav className=\"mr-auto\">\r\n                    <Nav.Link as={Link} to=\"/\">Редактор</Nav.Link>\r\n                    <Nav.Link as={Link} to=\"/curators\">Управление</Nav.Link>\r\n                    <Nav.Link as={Link} to=\"/docs\">Документация</Nav.Link>\r\n                    <Nav.Link as={Link} to=\"/about\">О программе</Nav.Link>\r\n                </Nav>\r\n                <Form inline>\r\n                    <Navbar.Brand aria-disabled href=\"/curators\">{state.username}</Navbar.Brand>\r\n                    <Nav.Link as={Link} to=\"/curators\">{role}</Nav.Link>\r\n                    <LogoutButton />\r\n                </Form>\r\n            </Navbar.Collapse>\r\n        </Navbar>\r\n    )\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\n\r\n\r\ntype Props = {\r\n    title: string\r\n    message: string\r\n    handleOK: ()=> void\r\n    active: boolean\r\n    setActive: (value: boolean) => void\r\n}\r\n\r\nexport const ConfirmDialog: React.FC<Props> = ({title, message, handleOK, active, setActive}) => {\r\n\r\n    const handleClose = () => {\r\n        setActive(false);\r\n    };\r\n\r\n    return (\r\n            <Dialog\r\n                open={active}\r\n                onClose={handleClose}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText id=\"alert-dialog-description\">\r\n                        {message}\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose} color=\"primary\">\r\n                        Отмена\r\n                    </Button>\r\n                    <Button onClick={handleOK} color=\"primary\" autoFocus>\r\n                        ОК\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n    );\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\n\r\n\r\n\r\ntype Props = {\r\n    message: string\r\n    active: boolean\r\n    setActive: (value: boolean) => void\r\n}\r\n\r\nexport const NotifyDialog: React.FC<Props> = ({message, active, setActive}) => {\r\n    const handleClose = () => {\r\n        setActive(false);\r\n    };\r\n\r\n    return (\r\n            <Dialog\r\n                open={active}\r\n                onClose={handleClose}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n            >\r\n                <DialogContent>\r\n                    <DialogContentText id=\"alert-dialog-description\">\r\n                        {message}\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose} color=\"primary\" autoFocus>\r\n                        ОК\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n    );\r\n}","import React, { useContext, useState } from 'react';\r\nimport { Grid, TextField, Button, IconButton } from '@material-ui/core';\r\nimport { NotifyDialog } from '../../../components/NotifyDialog';\r\nimport { UserService } from '../../../services/UserService';\r\nimport { UserContext } from '../../../context/user.provider';\r\nimport { AuthStateService } from '../../../services/AuthStateService';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\n\r\ntype Props = {\r\n    authService: AuthStateService\r\n}\r\n\r\n\r\ninterface State {\r\n    oldPassword: string;\r\n    newPassword: string;\r\n    Repeatpassword: string;\r\n    showPassword: boolean;\r\n    showRepeatPassword: boolean;\r\n}\r\n\r\nexport const ChangePassword: React.FC<Props> = ({ authService }) => {\r\n    const userService = new UserService(authService).getInstance();\r\n    const [values, setValues] = React.useState<State>({\r\n        oldPassword: '',\r\n        newPassword: '',\r\n        Repeatpassword: '',\r\n        showPassword: false,\r\n        showRepeatPassword: false,\r\n    });\r\n\r\n    const { state, dispatch } = useContext(UserContext);\r\n    const [notifyDialog, openNotifyDialog] = useState<boolean>(false);\r\n    const [notifyMessage, setNotifyMessage] = useState(\"\");\r\n    const [visible, setVisible] = useState<boolean>(true);\r\n\r\n\r\n    async function changePassword() {\r\n        setNotifyMessage(\"\")\r\n        if (values.newPassword !== values.Repeatpassword) {\r\n            setNotifyMessage(\"Пароли не совпадают. Повторите пароль в соответствующем поле ввода.\")\r\n            openNotifyDialog(true);\r\n            return;\r\n        } else if (values.newPassword === \"\" || values.Repeatpassword === \"\") {\r\n            setNotifyMessage(\"Поля пароля не должны быть пустыми\")\r\n            openNotifyDialog(true);\r\n            return;\r\n        }\r\n        const response = await authService.changePassword(values.oldPassword, values.newPassword);\r\n        console.log(response)\r\n        if (response.statusText === \"Invalid password\") {\r\n            setNotifyMessage(\"Текущий пароль введен неверно\");\r\n            openNotifyDialog(true);\r\n            return\r\n        } else\r\n        if (response.status === 200) {\r\n            setNotifyMessage(\"Пароль успешно изменен\");\r\n            openNotifyDialog(true);\r\n            return\r\n        } else {\r\n            setNotifyMessage(\"Слабый пароль. Пароль должен состоять из букв латинского алфавита, содержать хотя бы 1 заглавную и 1 прописную букву или цифру. Длина не менее 6 символов\");\r\n            openNotifyDialog(true);\r\n        }\r\n        \r\n    }\r\n\r\n    const handleClickShowPassword = () => {\r\n        setValues({ ...values, showPassword: !values.showPassword });\r\n    };\r\n\r\n    const handleMouseDownPassword = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <NotifyDialog message={notifyMessage} active={notifyDialog} setActive={openNotifyDialog} />\r\n            <Grid item xs={12} sm={12}>\r\n                <Button\r\n                    hidden={!visible}\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={(e) => (setVisible(!visible))}>\r\n                    Изменить пароль\r\n                </Button>\r\n            </Grid>\r\n            <Grid hidden={visible} item xs={10} sm={10}>\r\n                <TextField\r\n                    fullWidth\r\n                    error={false}\r\n                    id=\"outlined-basic\"\r\n                    label=\"Старый пароль\"\r\n                    variant=\"outlined\"\r\n                    value={values.oldPassword}\r\n                    type={values.showPassword ? \"text\" : \"password\"}\r\n                    onChange={(e) => { setValues({ ...values, oldPassword: e.target.value }) }}\r\n                />\r\n            </Grid>\r\n            <Grid hidden={visible} item xs={1} sm={1}>\r\n                <IconButton\r\n                    aria-label=\"toggle password visibility\"\r\n                    onClick={handleClickShowPassword}\r\n                    onMouseDown={handleMouseDownPassword}\r\n                    edge=\"end\"\r\n                >\r\n                    {values.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n            </Grid>\r\n            <Grid hidden={visible} item xs={12} sm={6}>\r\n                <TextField\r\n                    id=\"outlined-basic\"\r\n                    label=\"Новый пароль\"\r\n                    variant=\"outlined\"\r\n                    value={values.newPassword}\r\n                    type={values.showPassword ? \"text\" : \"password\"}\r\n                    onChange={(e) => { setValues({ ...values, newPassword: e.target.value }) }}\r\n                />\r\n            </Grid>\r\n            <Grid hidden={visible} item xs={12} sm={6}>\r\n                <TextField\r\n                    id=\"outlined-basic\"\r\n                    label=\"Повторите пароль\"\r\n                    variant=\"outlined\"\r\n                    value={values.Repeatpassword}\r\n                    type={values.showPassword ? \"text\" : \"password\"}\r\n                    onChange={(e) => { setValues({ ...values, Repeatpassword: e.target.value }) }} />\r\n            </Grid>\r\n            <Grid hidden={visible} item xs={12} sm={6}>\r\n                <Button\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    onClick={(e) => (changePassword())}>\r\n                    Изменить пароль\r\n                </Button>\r\n            </Grid>\r\n            <Grid hidden={visible} item xs={12} sm={6}>\r\n                <Button\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={(e) => (setVisible(!visible))}>\r\n                    Закрыть\r\n                </Button>\r\n            </Grid>\r\n        </React.Fragment>\r\n    )\r\n}","import React, { useContext, useState } from 'react';\r\nimport { Grid, TextField, Button } from '@material-ui/core';\r\nimport { NotifyDialog } from '../../../components/NotifyDialog';\r\nimport { UserService } from '../../../services/UserService';\r\nimport { UserContext } from '../../../context/user.provider';\r\nimport { AuthStateService } from '../../../services/AuthStateService';\r\n\r\ntype Props = {\r\n    authService: AuthStateService\r\n}\r\n\r\n\r\n\r\nexport const RenameForm: React.FC<Props> = ({ authService }) => {\r\n    const userService = new UserService(authService).getInstance();\r\n\r\n    const [old, setOld] = useState('');\r\n    const [newName, setNew] = useState('');\r\n    const { state, dispatch } = useContext(UserContext);\r\n    const [notifyDialog, openNotifyDialog] = useState<boolean>(false);\r\n    const [notifyMessage, setNotifyMessage] = useState(\"\");\r\n    const [visible, setVisible] = useState<boolean>(true);\r\n\r\n\r\n    function renameUser() {\r\n        if (old === authService.getUsername()) {\r\n            if (newName.length >= 6) {\r\n                console.log(authService.getUsername())\r\n                userService.RenameUser(newName);\r\n                dispatch({\r\n                    type: \"UPDATE\",\r\n                    payload: {\r\n                        username: newName,\r\n                        role: state.role,\r\n                        uuid: state.uuid,\r\n                        access_token: state.access_token,\r\n                        email: state.email\r\n                    }\r\n                })\r\n                setNotifyMessage(\"Имя пользователя успешно изменено!\");\r\n                setVisible(!visible)\r\n            } else\r\n                setNotifyMessage(\"Новое имя пользователя короче 6 символов!\");\r\n        } else {\r\n            setNotifyMessage(\"Проверьте ввод! Старое имя введено некорректно!\");\r\n        }\r\n        openNotifyDialog(true);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <NotifyDialog message={notifyMessage} active={notifyDialog} setActive={openNotifyDialog} />\r\n            <Grid item xs={12} sm={12}>\r\n                <Button\r\n                    hidden={!visible}\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={(e) => (setVisible(!visible))}>\r\n                    Изменить имя пользователя\r\n                </Button>\r\n            </Grid>\r\n            <Grid hidden={visible} item xs={12} sm={6}>\r\n                <TextField error={false} id=\"outlined-basic\" label=\"Введите старое имя\" variant=\"outlined\" value={old} onChange={(e) => { setOld(e.target.value) }} />\r\n            </Grid>\r\n            <Grid hidden={visible} item xs={12} sm={6}>\r\n                <TextField id=\"outlined-basic\" label=\"Введите новое имя\" variant=\"outlined\" value={newName} onChange={(e) => { setNew(e.target.value) }} />\r\n            </Grid>\r\n            <Grid hidden={visible} item xs={12} sm={6}>\r\n                <Button\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    onClick={(e) => (renameUser())}>\r\n                    Изменить имя\r\n                </Button>\r\n            </Grid>\r\n            <Grid hidden={visible} item xs={12} sm={6}>\r\n                <Button\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={(e) => (setVisible(!visible))}>\r\n                    Закрыть\r\n                </Button>\r\n            </Grid>\r\n        </React.Fragment>\r\n    )\r\n}","import { Button, Container, createStyles, Grid, makeStyles, Paper, TextField, Theme } from '@material-ui/core';\r\nimport React, { useContext } from 'react';\r\nimport { useState } from 'react';\r\nimport { ConfirmDialog } from '../../components/ConfirmDialog';\r\nimport { UserContext } from '../../context/user.provider';\r\nimport { AuthStateService } from '../../services/AuthStateService';\r\nimport { ChangePassword } from './Components/ChangePassword';\r\nimport { RenameForm } from './Components/RenameForm';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(2),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    form: {\r\n        width: '100%',\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n    dangerButton: {\r\n        borderColor: theme.palette.error.dark,\r\n        color: theme.palette.error.dark,\r\n        '&:hover': {\r\n            backgroundColor: theme.palette.error.main,\r\n            color: \"white\"\r\n        },\r\n    },\r\n}));\r\n\r\ntype Props = {\r\n    authService: AuthStateService\r\n}\r\n\r\n\r\n\r\nexport const AccountControl: React.FC<Props> = ({ authService }) => {\r\n    const { state, dispatch } = useContext(UserContext);\r\n\r\n    const [dialog, openDialog] = useState<boolean>(false);\r\n    const classes = useStyles();\r\n    function handleLogout() {\r\n        dispatch({\r\n            type: \"LOGOUT\",\r\n            payload: {\r\n                access_token: undefined,\r\n                role: undefined,\r\n                username: undefined,\r\n                uuid: undefined,\r\n                email: undefined,\r\n            }\r\n        })\r\n    }\r\n\r\n    function deleteAccount() {\r\n        handleLogout()\r\n        authService.DeleteRegistrationData(authService.getUUID());\r\n        openDialog(false);\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n            <form className={classes.form}>\r\n                <Grid container spacing={2}>\r\n                    <RenameForm authService={authService} />\r\n                    <ChangePassword authService={authService} />\r\n                    <ConfirmDialog\r\n                        setActive={openDialog}\r\n                        active={dialog}\r\n                        title={\"Удалить аккаунт?\"}\r\n                        message={\"Это действие впоследствии отменить невозможно!\"}\r\n                        handleOK={deleteAccount}\r\n                    />\r\n                    <Grid item xs={12} sm={12}>\r\n                        <Button\r\n                            fullWidth\r\n                            variant=\"outlined\"\r\n                            color=\"secondary\"\r\n                            onClick={(e) => (openDialog(true))} \r\n                            className={classes.dangerButton}\r\n                            >\r\n                            Удалить аккаунт\r\n                        </Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n        </Container>\r\n    )\r\n}","import { Button, Checkbox, FormControlLabel, Grid, makeStyles, MenuItem, Select, TextField } from '@material-ui/core';\r\nimport { Favorite, FavoriteBorder } from '@material-ui/icons';\r\nimport React from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { ConfirmDialog } from '../../components/ConfirmDialog';\r\nimport { NotifyDialog } from '../../components/NotifyDialog';\r\nimport { RelationDTO } from '../../DTO/relationDTO';\r\nimport { UserDTO } from '../../DTO/UserDTO';\r\nimport { AuthStateService } from '../../services/AuthStateService';\r\nimport { CuratorService } from '../../services/CuratorService';\r\nimport { UserService } from '../../services/UserService';\r\n\r\nconst authService: AuthStateService = new AuthStateService().getInstance();\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    dangerButton: {\r\n        backgroundColor: theme.palette.error.dark,\r\n        '&:hover': {\r\n            backgroundColor: theme.palette.error.main,\r\n        },\r\n    },\r\n}\r\n));\r\n\r\ntype Props = {\r\n    selectedUser: UserDTO;\r\n    curatorService: CuratorService;\r\n    userService: UserService;\r\n    favorites: RelationDTO[];\r\n    setFavorites: (value: RelationDTO[]) => void\r\n}\r\n\r\nexport const UserCard: React.FC<Props> = ({ selectedUser, favorites, curatorService, userService, setFavorites }) => {\r\n    const [favorite, setFavorite] = useState<boolean>(false);\r\n    const [relationName, setRelationName] = useState<string>('');\r\n    const [role, setRole] = useState<string>('USER');\r\n    const [dialog, openDialog] = useState<boolean>(false);\r\n    const [notify, openNotify] = useState<boolean>(false);\r\n    const [notifyText, setNotifyText] = useState<string>('');\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        const relation = favorites.find((value) => (value.uuid_user === selectedUser.uuid));\r\n        setFavorite(relation !== undefined);\r\n        setRelationName(relation ? relation.relation_name : '');\r\n        setRole(selectedUser.role);\r\n    }, [selectedUser])\r\n\r\n\r\n    function favoriteCheck(e: any) {\r\n        const relation = favorites.find((value) => (value.uuid_user === selectedUser.uuid));\r\n        if (relation === undefined) {\r\n            curatorService.createRelation({\r\n                uuid_user: selectedUser.uuid,\r\n                uuid_curator: authService.getUUID(),\r\n                relation_name: ''\r\n            });\r\n        } else {\r\n            curatorService.DeleteRelation(relation.id);\r\n        }\r\n        setFavorite(!favorite);\r\n        curatorService.getRelationsByCurator(authService.getUUID()).then(resolve => (setFavorites(resolve)))\r\n    }\r\n\r\n    useEffect(() => {\r\n        const relation = favorites.find((value) => (value.uuid_user === selectedUser.uuid));\r\n        if (relation) {\r\n            relation.relation_name = relationName;\r\n            curatorService.updateRelation(relation);\r\n        }\r\n    }, [relationName])\r\n\r\n\r\n    const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\r\n        setRole(event.target.value as string);\r\n    };\r\n\r\n    const SetRoleButtonHandle = (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n        if (selectedUser.role !== \"ADMIN\") {\r\n            selectedUser.role = role;\r\n            userService.UpdateUserRole(selectedUser);\r\n        }\r\n    };\r\n\r\n    const DeleteUserButtonHandle = () => {\r\n        if (selectedUser.role !== \"ADMIN\") {\r\n            const auth = new AuthStateService().getInstance();\r\n            auth.DeleteRegistrationData(selectedUser.uuid).then(response=>{\r\n                if(response.status === 200) {\r\n                    setNotifyText(\"Успешно выполнено\");\r\n                } else {\r\n                    setNotifyText(`Ошибка выполнения ${response.status}:${response.statusText}`);\r\n                }\r\n                openNotify(true)\r\n            });\r\n        }\r\n        openDialog(false);\r\n    };\r\n\r\n    return (\r\n        <Grid container spacing={2}>\r\n            <Grid item xs={12} sm={6}>\r\n                <FormControlLabel\r\n                    disabled={selectedUser.role !== \"USER\"}\r\n                    control={<Checkbox icon={<FavoriteBorder />} checkedIcon={<Favorite />} checked={favorite} onChange={(e) => (favoriteCheck(e))} />}\r\n                    label=\"Курируемый\"\r\n                    value={favorite}\r\n                />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                    disabled={!favorite}\r\n                    label=\"Название отношения\"\r\n                    variant=\"outlined\"\r\n                    value={relationName}\r\n                    onChange={e => (setRelationName(e.target.value))}\r\n                />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6}>\r\n                <Select\r\n                    fullWidth\r\n                    disabled={authService.getRole() !== 'ADMIN'}\r\n                    value={role}\r\n                    onChange={handleChange}\r\n                    variant=\"outlined\"\r\n                >\r\n                    <MenuItem value={\"USER\"}>Пользователь</MenuItem>\r\n                    <MenuItem value={\"CURATOR\"}>Куратор</MenuItem>\r\n                    <MenuItem value={\"ADMIN\"}>Админ</MenuItem>\r\n                </Select>\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n                <Button\r\n                    fullWidth\r\n                    disabled={authService.getRole() !== 'ADMIN' || authService.getUUID() === selectedUser.uuid}\r\n                    variant=\"contained\" color=\"primary\"\r\n                    onClick={SetRoleButtonHandle} \r\n                    >\r\n                    Установить роль\r\n                </Button>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={12}>\r\n                <ConfirmDialog setActive={openDialog} active={dialog} title={\"Удалить аккаунт?\"} message={\"Это действие впоследствии отменить невозможно!\"} handleOK={DeleteUserButtonHandle} ></ConfirmDialog>\r\n               <NotifyDialog message={notifyText} active={notify} setActive={openNotify}></NotifyDialog>\r\n                <Button\r\n                    fullWidth\r\n                    hidden={authService.getRole() !== 'ADMIN'}\r\n                    variant=\"contained\" color=\"secondary\" onClick={() => openDialog(true)}\r\n                    className={classes.dangerButton}\r\n                >\r\n                    Удалить пользователя\r\n                </Button>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}","import React from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { Card } from 'react-bootstrap';\r\nimport { UserDTO } from '../../DTO/UserDTO';\r\nimport { UserService } from '../../services/UserService';\r\nimport './UserList.scss';\r\nimport Select from 'react-dropdown-select';\r\nimport { Typography } from '@material-ui/core';\r\n\r\n\r\ntype Props = {\r\n    userService: UserService;\r\n    selectedUser: UserDTO;\r\n    selectUser: (value: UserDTO) => void;\r\n}\r\n\r\n\r\nexport const UserList: React.FC<Props> = ({ userService, selectedUser, selectUser }) => {\r\n    const [users, setUsers] = useState<UserDTO[]>([]);\r\n    const [filter, setFilter] = useState<string>('');\r\n\r\n    function filterUser(user: UserDTO) {\r\n        return user.username.match(`^${filter}`);\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        userService.GetAllUsers()\r\n            .then(users => setUsers(users))\r\n    }, [])\r\n\r\n\r\n    function setUser(values: UserDTO[]) {\r\n        if (values.length) {\r\n            selectUser(values[0]);\r\n        }\r\n    }\r\n    const noDataRenderer = () => {\r\n        return (\r\n            <Typography variant=\"h6\">\r\n                Пользователи не найдены\r\n            </Typography>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Card >\r\n            <Card.Body>\r\n                <Select\r\n                    options={users}\r\n                    multi={false}\r\n                    searchBy={'username'}\r\n                    labelField={\"username\"}\r\n                    valueField={\"uuid\"}\r\n                    placeholder={\"Начните вводить имя пользователя\"}\r\n                    noDataRenderer={noDataRenderer}\r\n                    values={[]}\r\n                    onChange={(value) => setUser(value)}\r\n                />\r\n\r\n            </Card.Body>\r\n        </Card>\r\n    )\r\n}","import { Container, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { RelationDTO } from '../../DTO/relationDTO';\r\nimport { UserDTO } from '../../DTO/UserDTO';\r\nimport { AuthStateService } from '../../services/AuthStateService';\r\nimport { CuratorService } from '../../services/CuratorService';\r\nimport { UserService } from '../../services/UserService';\r\nimport { UserCard } from './UserCard';\r\nimport { UserList } from './UserList';\r\n\r\ninterface Props {\r\n    authService: AuthStateService\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    form: {\r\n        width: \"100%\",\r\n        marginTop: theme.spacing(2)\r\n    },\r\n}));\r\n\r\nexport const UserManagement: React.FC<Props> = ({ authService }) => {\r\n    const classes = useStyles();\r\n    const userService: UserService = new UserService(authService);\r\n    const curatorService: CuratorService = new CuratorService(authService);\r\n\r\n    const INITIAL_VALUE: UserDTO = {\r\n        username: \"\",\r\n        role: \"\",\r\n        uuid: \"\",\r\n        email: \"\",\r\n    }\r\n    const [selectedUser, selectUser] = useState<UserDTO>(INITIAL_VALUE);\r\n    const [favorites, setFavorites] = useState<RelationDTO[]>([]);\r\n    useEffect(() => {\r\n        curatorService.getRelationsByCurator(authService.getUUID()).then(resolve => (setFavorites(resolve)))\r\n    }, [selectedUser])\r\n\r\n\r\n    return (\r\n        <Container maxWidth=\"xs\">\r\n            <form className={classes.form}>\r\n                <Grid hidden={authService.getRole() === 'USER'} container spacing={2}>\r\n                    <Grid item xs={12} sm={12}>\r\n                        <Typography variant=\"h4\" align=\"center\">\r\n                            Администрирование\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={12}>\r\n                        <UserList userService={userService} selectedUser={selectedUser} selectUser={selectUser}></UserList>\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={12}>\r\n                        <UserCard setFavorites={setFavorites} favorites={favorites} userService={userService} curatorService={curatorService} selectedUser={selectedUser} ></UserCard>\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n        </Container>\r\n    );\r\n}","import { Container, Grid, Typography } from '@material-ui/core';\r\nimport React, { useEffect } from 'react';\r\nimport { AuthStateService } from '../../services/AuthStateService';\r\nimport { AccountControl } from './AccountControl';\r\nimport { UserManagement } from './UserManagement';\r\n\r\n\r\nconst authService: AuthStateService = new AuthStateService().getInstance();\r\n\r\n\r\nexport const ManagementPage: React.FC = () => {\r\n\r\n\r\n    useEffect(() => {\r\n        document.title = \"Управление\"\r\n    },[]);\r\n    \r\n    return (\r\n        <Container >\r\n            <Grid>\r\n                <Container>\r\n                    <Typography align=\"center\" variant=\"h4\">Управление учётной записью</Typography>\r\n                </Container>\r\n            </Grid>\r\n            <Grid>\r\n                <AccountControl authService={authService}></AccountControl>\r\n            </Grid>\r\n            <Grid>\r\n                <UserManagement authService={authService}></UserManagement>\r\n            </Grid>\r\n            \r\n        </Container>\r\n    );\r\n}","import { Container, Button, makeStyles, Typography } from '@material-ui/core';\r\nimport React, { FC, useEffect } from 'react';\r\nimport GitHub from '@material-ui/icons/GitHub';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    button: {\r\n      margin: theme.spacing(1),\r\n    },\r\n  }));\r\n\r\nexport const About : FC = () => {\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        document.title = \"О продукте\"\r\n    },[]);\r\n\r\n    \r\n    return(\r\n       <Container>\r\n           <Typography paragraph>\r\n           Данные программный продукт разрабатывается в рамках\r\n           дипломного проектирования веб среды для обучения алгоритмизации с помощью языка ДРАКОН\r\n           студентом астраханского государственного технического университета группы ДИПРБ-41 (2020-2021 год) \r\n           20182750 Самарским Владиславом Вальеревичом.\r\n        </Typography>\r\n           \r\n           <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        className={classes.button}\r\n        startIcon={<GitHub />}\r\n        href=\"https://github.com/samarsky-canary/dragon\"\r\n      >\r\n        Открыть проект на GitHub\r\n      </Button>\r\n       </Container>\r\n    );\r\n}","import React, { useContext, useEffect } from 'react';\r\nimport './App.css';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport { EditorPage } from './Pages/Editor/Editor';\r\nimport Login from './Pages/Login/Login';\r\nimport { NotFoundPage } from './Pages/NotFound/NotFound';\r\nimport { NavigationFooter } from './components/NavigationFooter';\r\nimport { DocPage } from './Pages/DocPage/DocPage';\r\nimport { UserContext } from './context/user.provider';\r\nimport { ManagementPage } from './Pages/Management/Management';\r\nimport { About } from './Pages/About/About';\r\nimport { AuthStateService } from './services/AuthStateService';\r\n\r\nconst App: React.FC = () => {\r\n\r\n  const { state, dispatch } = useContext(UserContext)\r\n\r\n\r\n  // Check if user already have saved logged info\r\n  useEffect(() => {\r\n    const loggedInUser = localStorage.getItem(\"user\");\r\n    if (loggedInUser) {\r\n      const foundUser = JSON.parse(loggedInUser);\r\n      const as = new AuthStateService().getInstance();\r\n      as.TokenVerification(foundUser.access_token).then(isLogged => {\r\n        if (isLogged) {\r\n          as.setMeta(foundUser.uuid, foundUser.role, foundUser.username, foundUser.access_token, foundUser.email)\r\n          dispatch({\r\n            type: \"LOGIN\",\r\n            payload: foundUser\r\n          });\r\n        } else {\r\n          dispatch({\r\n            type: \"LOGOUT\",\r\n            payload: {\r\n              access_token: undefined,\r\n              role: undefined,\r\n              username: undefined,\r\n              uuid: undefined,\r\n              email: undefined,\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }, []);\r\n\r\n\r\n  if (!state.access_token) {\r\n    return <Login setRegisterData={dispatch} />\r\n  }\r\n\r\n  return (\r\n    <div className='wrap-0'>\r\n      <NavigationFooter />\r\n      <Switch>\r\n        <Route exact path=\"/docs\">\r\n          <DocPage />\r\n        </Route>\r\n        <Route exact path=\"/curators\">\r\n          <ManagementPage />\r\n        </Route>\r\n        <Route exact path=\"/about\">\r\n          <About />\r\n        </Route>\r\n        <Route exact path=\"/\">\r\n          <EditorPage />\r\n        </Route>\r\n        <Route path=\"*\" component={NotFoundPage} />\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport App from './App';\r\nimport { UserProvider } from './context/user.provider';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  //<React.StrictMode>\r\n    <BrowserRouter>\r\n      <UserProvider>\r\n        <App/>\r\n      </UserProvider>\r\n    </BrowserRouter>\r\n  //</React.StrictMode>,\r\n  ,\r\n  document.getElementById('root')\r\n);","import React, { FC, useEffect, useState } from 'react';\r\nimport { Container } from 'react-bootstrap';\r\nimport Markdown from 'markdown-to-jsx';\r\n\r\nexport const DocPage: FC = () => {\r\n\r\n    const file_name = 'TODO.md';\r\n    const [post, setPost] = useState('');\r\n\r\n    useEffect(() => {\r\n        import(`./${file_name}`)\r\n            .then(res => {\r\n                fetch(res.default)\r\n                    .then(res => res.text())\r\n                    .then(res => setPost(res))\r\n                    .catch(err => console.log(err));\r\n            })\r\n            .catch(err => console.log(err));\r\n    });\r\n\r\n    useEffect(() => {\r\n        document.title = \"Документация\"\r\n    },[]);\r\n\r\n    return (\r\n        <Container>\r\n            <Markdown>{post}</Markdown>\r\n        </Container>\r\n    )\r\n}\r\n"],"sourceRoot":""}